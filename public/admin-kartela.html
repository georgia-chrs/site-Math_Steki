<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ÎœÎ±Î¸Î·Ï„Î¹ÎºÏŒ Î£Ï„Î­ÎºÎ¹</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;400&display=swap" rel="stylesheet">
</head>
<body>
  <header>
    <div class="topbar">
      <div class="logo"><img src="logo.png" alt="logo"></div>
      <nav>
        <a href="#">Î‘ÏÏ‡Î¹ÎºÎ® Î£ÎµÎ»Î¯Î´Î±</a>
        <a href="#">Î ÏÎ¿Î³ÏÎ¬Î¼Î¼Î±Ï„Î±</a>
        <a href="#">Î Î±Î½ÎµÎ»Î»Î±Î´Î¹ÎºÎ­Ï‚ Î•Î¾ÎµÏ„Î¬ÏƒÎµÎ¹Ï‚</a>
        <a href="#">Î¦Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¯ÎµÏ‚</a>
        <a href="#">Î£Ï‡ÎµÏ„Î¹ÎºÎ¬ Î¼Îµ ÎµÎ¼Î¬Ï‚</a>
      </nav>
      <div class="icons">
        <a href="#"><img src="\elements\Group 17.svg" alt="fb" class="facebook-icon"></a>
        <a href="#"><img src="\elements\mdi_instagram.svg" alt="insta" class="instagram-icon"></a>
        <a href="#"><img src="\elements\phone.svg" alt="phone"></a>
        <a href="#"><img src="\elements\mail.svg" alt="mail"></a>
      </div>
      <a href="../index2.html" class="login-btn" style="text-decoration: none;">Î•Î¯ÏƒÎ¿Î´Î¿Ï‚</a>
    </div>
  </header>
  
  <main>
    <!-- Admin Dashboard Header -->
    <div class="admin-header">
      <h1> Admin Dashboard - Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· ÎœÎ±Î¸Î·Ï„ÏÎ½</h1>
      <p>Î”Î¹Î±Ï‡ÎµÎ¹ÏÎ¹ÏƒÏ„ÎµÎ¯Ï„Îµ Î²Î±Î¸Î¼Î¿ÏÏ‚, Ï€ÏÏŒÎ¿Î´Î¿ ÎºÎ±Î¹ Î·Î¼ÎµÏÎ¿Î»ÏŒÎ³Î¹Î¿ Î¼Î±Î¸Î·Ï„ÏÎ½</p>
    </div>

    <!-- Quick Actions Panel -->
    <div class="quick-actions-panel" style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); text-align: center;">
      <h2>ğŸš€ Î“ÏÎ®Î³Î¿ÏÎµÏ‚ Î•Î½Î­ÏÎ³ÎµÎ¹ÎµÏ‚</h2>
      <div style="display: flex; justify-content: center; align-items: center; gap: 25px; margin-top: 15px; flex-wrap: wrap;">
        
        <button class="quick-action-btn" onclick="openGradesModal()" style="background: linear-gradient(135deg, #dc3545, #c82333); color: white; border: none; padding: 15px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; transition: transform 0.2s; min-width: 200px;">
          ğŸ“Š ÎšÎ±Ï„Î±Ï‡ÏÏÎ·ÏƒÎ· Î’Î±Î¸Î¼Î¿Ï
        </button>
        
        <button class="quick-action-btn" onclick="openProgressModal()" style="background: linear-gradient(135deg, #28a745, #218838); color: white; border: none; padding: 15px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; transition: transform 0.2s; min-width: 200px;">
          ğŸ“ˆ ÎšÎ±Ï„Î±Î³ÏÎ±Ï†Î® Î ÏÎ¿ÏŒÎ´Î¿Ï…
        </button>
        
        <button class="quick-action-btn" onclick="openCalendarModal()" style="background: linear-gradient(135deg, #ffc107, #e0a800); color: white; border: none; padding: 15px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; transition: transform 0.2s; min-width: 200px;">
          ğŸ“… Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· Î—Î¼ÎµÏÎ¿Î»Î¿Î³Î¯Î¿Ï…
        </button>


        <button class="quick-action-btn" onclick="openBulkCalendarModal()" style="background: linear-gradient(135deg, #ff874b, #E39C50); color: white; border: none; padding: 15px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; transition: transform 0.2s; min-width: 200px;">
          ğŸ“… ÎœÎ±Î¶Î¹ÎºÎ® Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· Î—Î¼ÎµÏÎ¿Î»Î¿Î³Î¯Î¿Ï…
        </button>
      </div>
    </div>

    <!-- Student Selection Panel -->
    <div class="student-selection-panel" style="background: #ffffff; padding: 25px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 15px rgba(0,0,0,0.1); border-left: 5px solid #E39C50; width: 80%;">
      <h2> Î•Ï€Î¹Î»Î¿Î³Î® ÎœÎ±Î¸Î·Ï„Î®</h2>
      
      <!-- Search and Filter Controls -->
      <div class="search-controls" style=" width: 80%; display: grid; grid-template-columns: 1fr 200px 200px 150px; gap: 15px; margin: 20px 0; align-items: end;">
        
        <div class="form-group" style="margin-bottom: 0;">
          <label for="studentSearchInput">Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· ÎœÎ±Î¸Î·Ï„Î®</label>
          <input type="text" id="studentSearchInput" placeholder="ÎŒÎ½Î¿Î¼Î±, ÎµÏ€ÏÎ½Ï…Î¼Î¿ Î® Ï„Î·Î»Î­Ï†Ï‰Î½Î¿..." style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px;" oninput="searchStudents()">
        </div>
        
        <div class="form-group" style="margin-bottom: 0;">
          <label for="studentClassFilter">Î¤Î¬Î¾Î·</label>
          <select id="studentClassFilter" style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px;" onchange="searchStudents()">
            <option value="">ÎŒÎ»ÎµÏ‚ Î¿Î¹ Ï„Î¬Î¾ÎµÎ¹Ï‚</option>
            <option value="Î‘' Î“Ï…Î¼Î½Î±ÏƒÎ¯Î¿Ï…">Î‘' Î“Ï…Î¼Î½Î±ÏƒÎ¯Î¿Ï…</option>
            <option value="Î’' Î“Ï…Î¼Î½Î±ÏƒÎ¯Î¿Ï…">Î’' Î“Ï…Î¼Î½Î±ÏƒÎ¯Î¿Ï…</option>
            <option value="Î“' Î“Ï…Î¼Î½Î±ÏƒÎ¯Î¿Ï…">Î“' Î“Ï…Î¼Î½Î±ÏƒÎ¯Î¿Ï…</option>
            <option value="Î‘' Î›Ï…ÎºÎµÎ¯Î¿Ï…">Î‘' Î›Ï…ÎºÎµÎ¯Î¿Ï…</option>
            <option value="Î’' Î›Ï…ÎºÎµÎ¯Î¿Ï…">Î’' Î›Ï…ÎºÎµÎ¯Î¿Ï…</option>
            <option value="Î“' Î›Ï…ÎºÎµÎ¯Î¿Ï…">Î“' Î›Ï…ÎºÎµÎ¯Î¿Ï…</option>
          </select>
        </div>
        
        <div class="form-group" style="margin-bottom: 0;">
          <label for="studentSubjectFilter">ÎœÎ¬Î¸Î·Î¼Î±</label>
          <select id="studentSubjectFilter" style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px;" onchange="searchStudents()">
            <option value="">ÎŒÎ»Î± Ï„Î± Î¼Î±Î¸Î®Î¼Î±Ï„Î±</option>
          </select>
        </div>
        
        <button onclick="refreshStudentList()" class="btn btn-success" style="padding: 10px 20px; height: fit-content;">
           Î‘Î½Î±Î½Î­Ï‰ÏƒÎ·
        </button>
      </div>

      <!-- Search Results Count -->
      <div id="searchResultsCount" style="margin: 10px 0; color: #666; font-size: 14px;"></div>

      <!-- Selected Student Display -->
      <div id="selectedStudentDisplay" style="display: none; background: #e8f5e8; padding: 15px; border-radius: 8px; margin-top: 20px; border: 2px solid #28a745;">
        <h3 style="margin: 0 0 10px 0; color: #155724;">âœ… Î•Ï€Î¹Î»ÎµÎ³Î¼Î­Î½Î¿Ï‚ ÎœÎ±Î¸Î·Ï„Î®Ï‚</h3>
        <div id="selectedStudentInfo" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
          <!-- Student info will be populated here -->
        </div>
        <div style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
          <button onclick="viewStudentDetails()" class="btn btn-info" style="padding: 8px 15px;">
             Î ÏÎ¿Î²Î¿Î»Î® Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Ï‰Î½
          </button>
          <button onclick="viewStudentGrades()" class="btn btn-warning" style="padding: 8px 15px;">
             Î’Î±Î¸Î¼Î¿Î»Î¿Î³Î¯ÎµÏ‚
          </button>
          <button onclick="viewStudentProgress()" class="btn btn-secondary" style="padding: 8px 15px;">
             Î ÏÏŒÎ¿Î´Î¿Ï‚
          </button>
          <button onclick="clearSelectedStudent()" class="btn btn-light" style="padding: 8px 15px;">
             ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚
          </button>
        </div>
      </div>
    </div>

    <!-- Students Grid/List -->
    <div class="students-grid-section" style="background: #ffffff; padding: 25px; border-radius: 10px; box-shadow: 0 2px 15px rgba(0,0,0,0.1);">
      <h2>ğŸ‘¥ ÎœÎ±Î¸Î·Ï„Î­Ï‚</h2>
      <div id="studentsGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
        <!-- Students will be populated here -->
      </div>
    </div>

    <!-- Modals -->
    <!-- Grades Modal -->
    <div id="gradesModal" class="modal">
      <div class="modal-content" style="max-width: 650px; background: #fffdd5; border: 2px solid #ff7e5f; border-radius: 15px; box-shadow: 0 10px 30px rgba(77, 44, 30, 0.15);">
        <span class="close" onclick="closeGradesModal()" style="color: #4d2c1e; font-size: 28px; font-weight: bold;">&times;</span>
        <h2 style="color: #4d2c1e; text-align: center; margin-bottom: 25px; font-size: 24px; border-bottom: 3px solid #ff7e5f; padding-bottom: 15px;">ğŸ“Š ÎšÎ±Ï„Î±Ï‡ÏÏÎ·ÏƒÎ· Î’Î±Î¸Î¼Î¿Ï</h2>
        
        <div style="background: linear-gradient(135deg, #fff8e1, #ffecb3); padding: 15px; border-radius: 12px; margin-bottom: 25px; border-left: 5px solid #ff7e5f; box-shadow: 0 2px 8px rgba(255, 126, 95, 0.1);">
          <small style="color: #4d2c1e; font-weight: 500;"> <strong>ğŸ’¡ Î£Ï…Î¼Î²Î¿Ï…Î»Î®:</strong> ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Ï€ÏÎ¿ÏƒÎ¸Î­ÏƒÎµÏ„Îµ Ï€Î¿Î»Î»Î±Ï€Î»Î¿ÏÏ‚ Î²Î±Î¸Î¼Î¿ÏÏ‚ ÏƒÏ…Î½ÎµÏ‡ÏŒÎ¼ÎµÎ½Î±. Î¤Î¿ Ï€Î±ÏÎ¬Î¸Ï…ÏÎ¿ Î¸Î± Ï€Î±ÏÎ±Î¼ÎµÎ¯Î½ÎµÎ¹ Î±Î½Î¿Î¹Ï‡Ï„ÏŒ Î¼ÎµÏ„Î¬ Ï„Î·Î½ Î±Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·.</small>
        </div>
        
        <form id="gradesForm">
          <div class="form-group">
            <label style="color: #4d2c1e; font-weight: 600; margin-bottom: 8px; display: block;">ÎœÎ±Î¸Î·Ï„Î®Ï‚</label>
            <div id="gradeStudentInfo" style="background: #ffffff; padding: 12px; border-radius: 8px; margin-bottom: 20px; border: 2px solid #ff7e5f; color: #4d2c1e; font-weight: 500;">
              Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Î¼Î±Î¸Î·Ï„Î® Ï€ÏÏÏ„Î±
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="gradeSubject">ÎœÎ¬Î¸Î·Î¼Î± *</label>
              <select id="gradeSubject" required>
                <option value="">Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Î¼Î¬Î¸Î·Î¼Î±</option>
              </select>
            </div>
            <div class="form-group">
              <label for="gradeType">Î¤ÏÏ€Î¿Ï‚ Î‘Î¾Î¹Î¿Î»ÏŒÎ³Î·ÏƒÎ·Ï‚ *</label>
              <select id="gradeType" required>
                <option value="">Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Ï„ÏÏ€Î¿</option>
                <option value="quiz">Î”Î¹Î±Î³ÏÎ½Î¹ÏƒÎ¼Î±</option>
                <option value="homework">Î•ÏÎ³Î±ÏƒÎ¯Î±</option>
                <option value="oral">Î ÏÎ¿Ï†Î¿ÏÎ¹ÎºÏŒ</option>
                <option value="project">Project</option>
                <option value="exam">Î•Î¾ÎµÏ„Î¬ÏƒÎµÎ¹Ï‚</option>
              </select>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="gradeValue">Î’Î±Î¸Î¼ÏŒÏ‚ *</label>
              <input type="number" id="gradeValue" min="0" max="20" step="0.5" required placeholder="Ï€.Ï‡. 15.5">
            </div>
            <div class="form-group">
              <label for="gradeDate">Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± *</label>
              <input type="date" id="gradeDate" required>
            </div>
          </div>
          
          <div class="form-group">
            <label for="gradeComments">Î£Ï‡ÏŒÎ»Î¹Î±</label>
            <textarea id="gradeComments" rows="3" placeholder="Î ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÎ¬ ÏƒÏ‡ÏŒÎ»Î¹Î± Î³Î¹Î± Ï„Î¿Î½ Î²Î±Î¸Î¼ÏŒ..."></textarea>
          </div>
          
          <div style="display: flex; justify-content: center; align-items: center; gap: 20px; margin-top: 30px; padding-top: 20px; border-top: 2px solid #ff7e5f; flex-wrap: wrap;">
            <button type="button" class="btn btn-secondary" onclick="clearGradesForm()" style="background: #4d2c1e; color: #fffdd5; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">ğŸ§¹ ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚</button>
            <button type="button" class="btn btn-primary" onclick="closeGradesModal()" style="background: #ff7e5f; color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">âŒ Î‘ÎºÏÏÏ‰ÏƒÎ·</button>
            <button type="submit" class="btn btn-success" style="background: linear-gradient(135deg, #4d2c1e, #ff7e5f); color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">ğŸ’¾ Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Î’Î±Î¸Î¼Î¿Ï</button>
            <button type="button" class="btn btn-info" onclick="clearGradesForm()" style="background: #fffdd5; color: #4d2c1e; border: 2px solid #ff7e5f; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">â• ÎÎ­Î± Î•Î³Î³ÏÎ±Ï†Î®</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Progress Modal -->
    <div id="progressModal" class="modal">
      <div class="modal-content" style="max-width: 650px; background: #fffdd5; border: 2px solid #ff7e5f; border-radius: 15px; box-shadow: 0 10px 30px rgba(77, 44, 30, 0.15);">
        <span class="close" onclick="closeProgressModal()" style="color: #4d2c1e; font-size: 28px; font-weight: bold;">&times;</span>
        <h2 style="color: #4d2c1e; text-align: center; margin-bottom: 25px; font-size: 24px; border-bottom: 3px solid #ff7e5f; padding-bottom: 15px;">ğŸ“ˆ ÎšÎ±Ï„Î±Î³ÏÎ±Ï†Î® Î ÏÎ¿ÏŒÎ´Î¿Ï…</h2>
        
        <div style="background: linear-gradient(135deg, #fff8e1, #ffecb3); padding: 15px; border-radius: 12px; margin-bottom: 25px; border-left: 5px solid #ff7e5f; box-shadow: 0 2px 8px rgba(255, 126, 95, 0.1);">
          <small style="color: #4d2c1e; font-weight: 500;"> <strong>ğŸ’¡ Î£Ï…Î¼Î²Î¿Ï…Î»Î®:</strong> ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Ï€ÏÎ¿ÏƒÎ¸Î­ÏƒÎµÏ„Îµ Ï€Î¿Î»Î»Î±Ï€Î»Î­Ï‚ ÏƒÎ·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚ Ï€ÏÎ¿ÏŒÎ´Î¿Ï… ÏƒÏ…Î½ÎµÏ‡ÏŒÎ¼ÎµÎ½Î±. Î¤Î¿ Ï€Î±ÏÎ¬Î¸Ï…ÏÎ¿ Î¸Î± Ï€Î±ÏÎ±Î¼ÎµÎ¯Î½ÎµÎ¹ Î±Î½Î¿Î¹Ï‡Ï„ÏŒ Î¼ÎµÏ„Î¬ Ï„Î·Î½ Î±Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·.</small>
        </div>
        
        <form id="progressForm">
          <div class="form-group">
            <label style="color: #4d2c1e; font-weight: 600; margin-bottom: 8px; display: block;">ÎœÎ±Î¸Î·Ï„Î®Ï‚</label>
            <div id="progressStudentInfo" style="background: #ffffff; padding: 12px; border-radius: 8px; margin-bottom: 20px; border: 2px solid #ff7e5f; color: #4d2c1e; font-weight: 500;">
              Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Î¼Î±Î¸Î·Ï„Î® Ï€ÏÏÏ„Î±
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="progressSubject">ÎœÎ¬Î¸Î·Î¼Î± *</label>
              <select id="progressSubject" required>
                <option value="">Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Î¼Î¬Î¸Î·Î¼Î±</option>
              </select>
            </div>
            <div class="form-group">
              <label for="progressDate">Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± *</label>
              <input type="date" id="progressDate" required>
            </div>
          </div>
          
          <div class="form-group">
            <label for="progressNote">Î£Î·Î¼ÎµÎ¯Ï‰ÏƒÎ· Î ÏÎ¿ÏŒÎ´Î¿Ï… *</label>
            <textarea id="progressNote" rows="4" required placeholder="Ï€.Ï‡. Î’ÎµÎ»Ï„Î¯Ï‰ÏƒÎ· ÏƒÏ„Î± Î¼Î±Î¸Î·Î¼Î±Ï„Î¹ÎºÎ¬, Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎ· ÎµÎ¾Î¬ÏƒÎºÎ·ÏƒÎ· ÏƒÏ„Î· Î³ÎµÏ‰Î¼ÎµÏ„ÏÎ¯Î±..."></textarea>
          </div>
          
          <div class="form-group">
            <label for="progressRating">Î‘Î¾Î¹Î¿Î»ÏŒÎ³Î·ÏƒÎ· Î ÏÎ¿ÏŒÎ´Î¿Ï…</label>
            <select id="progressRating">
              <option value="">Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Î±Î¾Î¹Î¿Î»ÏŒÎ³Î·ÏƒÎ·</option>
              <option value="excellent">Î•Î¾Î±Î¹ÏÎµÏ„Î¹ÎºÎ®</option>
              <option value="good">ÎšÎ±Î»Î®</option>
              <option value="average">ÎœÎ­Ï„ÏÎ¹Î±</option>
              <option value="poor">Î§ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹ Î²ÎµÎ»Ï„Î¯Ï‰ÏƒÎ·</option>
            </select>
          </div>
          
          <div style="display: flex; justify-content: center; align-items: center; gap: 20px; margin-top: 30px; padding-top: 20px; border-top: 2px solid #ff7e5f; flex-wrap: wrap;">
            <button type="button" class="btn btn-secondary" onclick="clearProgressForm()" style="background: #4d2c1e; color: #fffdd5; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">ğŸ§¹ ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚</button>
            <button type="button" class="btn btn-primary" onclick="closeProgressModal()" style="background: #ff7e5f; color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">âŒ Î‘ÎºÏÏÏ‰ÏƒÎ·</button>
            <button type="submit" class="btn btn-success" style="background: linear-gradient(135deg, #4d2c1e, #ff7e5f); color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">ğŸ’¾ Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Î ÏÎ¿ÏŒÎ´Î¿Ï…</button>
            <button type="button" class="btn btn-info" onclick="clearProgressForm()" style="background: #fffdd5; color: #4d2c1e; border: 2px solid #ff7e5f; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">â• ÎÎ­Î± Î•Î³Î³ÏÎ±Ï†Î®</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Calendar Modal -->
    <div id="calendarModal" class="modal">
      <div class="modal-content" style="max-width: 650px; background: #fffdd5; border: 2px solid #ff7e5f; border-radius: 15px; box-shadow: 0 10px 30px rgba(77, 44, 30, 0.15);">
        <span class="close" onclick="closeCalendarModal()" style="color: #4d2c1e; font-size: 28px; font-weight: bold;">&times;</span>
        <h2 style="color: #4d2c1e; text-align: center; margin-bottom: 25px; font-size: 24px; border-bottom: 3px solid #ff7e5f; padding-bottom: 15px;">ğŸ“… Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· Î—Î¼ÎµÏÎ¿Î»Î¿Î³Î¯Î¿Ï…</h2>
        
        <div style="background: linear-gradient(135deg, #fff8e1, #ffecb3); padding: 15px; border-radius: 12px; margin-bottom: 25px; border-left: 5px solid #ff7e5f; box-shadow: 0 2px 8px rgba(255, 126, 95, 0.1);">
          <small style="color: #4d2c1e; font-weight: 500;"> <strong>ğŸ’¡ Î£Ï…Î¼Î²Î¿Ï…Î»Î®:</strong> ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Ï€ÏÎ¿ÏƒÎ¸Î­ÏƒÎµÏ„Îµ Ï€Î¿Î»Î»Î±Ï€Î»Î¬ Î³ÎµÎ³Î¿Î½ÏŒÏ„Î± ÏƒÏ…Î½ÎµÏ‡ÏŒÎ¼ÎµÎ½Î±. Î¤Î¿ Ï€Î±ÏÎ¬Î¸Ï…ÏÎ¿ Î¸Î± Ï€Î±ÏÎ±Î¼ÎµÎ¯Î½ÎµÎ¹ Î±Î½Î¿Î¹Ï‡Ï„ÏŒ Î¼ÎµÏ„Î¬ Ï„Î·Î½ Î±Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·.</small>
        </div>
        
        <form id="calendarForm">
          <div class="form-group">
            <label style="color: #4d2c1e; font-weight: 600; margin-bottom: 8px; display: block;">ÎœÎ±Î¸Î·Ï„Î®Ï‚</label>
            <div id="calendarStudentInfo" style="background: #ffffff; padding: 12px; border-radius: 8px; margin-bottom: 20px; border: 2px solid #ff7e5f; color: #4d2c1e; font-weight: 500;">
              Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Î¼Î±Î¸Î·Ï„Î® Ï€ÏÏÏ„Î±
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="calendarEventType">Î¤ÏÏ€Î¿Ï‚ Î“ÎµÎ³Î¿Î½ÏŒÏ„Î¿Ï‚ *</label>
              <select id="calendarEventType" required>
                <option value="">Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Ï„ÏÏ€Î¿</option>
                <option value="makeup_class">Î‘Î½Î±Ï€Î»Î®ÏÏ‰ÏƒÎ· ÎœÎ±Î¸Î®Î¼Î±Ï„Î¿Ï‚</option>
                <option value="exam">Î”Î¹Î±Î³ÏÎ½Î¹ÏƒÎ¼Î±</option>
                <option value="meeting">Î£Ï…Î½Î¬Î½Ï„Î·ÏƒÎ· Î“Î¿Î½Î­Î±</option>
                <option value="absence">Î‘Ï€Î¿Ï…ÏƒÎ¯Î±</option>
                <option value="extra_class">Î•Ï€Î¹Ï€Î»Î­Î¿Î½ ÎœÎ¬Î¸Î·Î¼Î±</option>
                <option value="other">Î†Î»Î»Î¿</option>
              </select>
            </div>
            <div class="form-group">
              <label for="calendarSubject">ÎœÎ¬Î¸Î·Î¼Î± *</label>
              <select id="calendarSubject" required>
                <option value="">Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Î¼Î¬Î¸Î·Î¼Î±</option>
              </select>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="calendarDate">Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± *</label>
              <input type="date" id="calendarDate" required>
            </div>
            <div class="form-group">
              <label for="calendarTime">ÎÏÎ±</label>
              <input type="time" id="calendarTime" placeholder="Ï€.Ï‡. 15:00">
            </div>
          </div>
          
          <div class="form-group">
            <label for="calendarTitle">Î¤Î¯Ï„Î»Î¿Ï‚ *</label>
            <input type="text" id="calendarTitle" required placeholder="Ï€.Ï‡. Î‘Î½Î±Ï€Î»Î®ÏÏ‰ÏƒÎ· ÎœÎ±Î¸Î·Î¼Î±Ï„Î¹ÎºÏÎ½">
          </div>
          
          <div class="form-group">
            <label for="calendarDescription">Î ÎµÏÎ¹Î³ÏÎ±Ï†Î®</label>
            <textarea id="calendarDescription" rows="3" placeholder="Î›ÎµÏ€Ï„Î¿Î¼Î­ÏÎµÎ¹ÎµÏ‚ Î³Î¹Î± Ï„Î¿ Î³ÎµÎ³Î¿Î½ÏŒÏ‚..."></textarea>
          </div>
          
          <div style="display: flex; justify-content: center; align-items: center; gap: 20px; margin-top: 30px; padding-top: 20px; border-top: 2px solid #ff7e5f; flex-wrap: wrap;">
            <button type="button" class="btn btn-secondary" onclick="clearCalendarForm()" style="background: #4d2c1e; color: #fffdd5; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">ğŸ§¹ ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚</button>
            <button type="button" class="btn btn-primary" onclick="closeCalendarModal()" style="background: #ff7e5f; color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">âŒ Î‘ÎºÏÏÏ‰ÏƒÎ·</button>
            <button type="submit" class="btn btn-success" style="background: linear-gradient(135deg, #4d2c1e, #ff7e5f); color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">ğŸ’¾ Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Î“ÎµÎ³Î¿Î½ÏŒÏ„Î¿Ï‚</button>
            <button type="button" class="btn btn-info" onclick="clearCalendarForm()" style="background: #fffdd5; color: #4d2c1e; border: 2px solid #ff7e5f; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">â• ÎÎ­Î± Î•Î³Î³ÏÎ±Ï†Î®</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal ÎœÎ±Î¶Î¹ÎºÎ®Ï‚ Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ·Ï‚ Î—Î¼ÎµÏÎ¿Î»Î¿Î³Î¯Î¿Ï… -->
    <div id="bulkCalendarModal" class="modal">
      <div class="modal-content" style="max-width: 600px; background: #fffbe6; border: 2px solid #E39C50; border-radius: 15px; box-shadow: 0 10px 30px rgba(232,93,6,0.12);">
        <span class="close" onclick="closeBulkCalendarModal()" style="color: #E39C50; font-size: 28px; font-weight: bold; cursor:pointer;">&times;</span>
        <h2 style="color: #E39C50; text-align: center; margin-bottom: 20px; font-size: 22px; border-bottom: 2px solid #E39C50; padding-bottom: 10px;">ğŸ“… ÎœÎ±Î¶Î¹ÎºÎ® Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· Î—Î¼ÎµÏÎ¿Î»Î¿Î³Î¯Î¿Ï… Î¤Î¼Î®Î¼Î±Ï„Î¿Ï‚</h2>
        <form id="bulkCalendarForm" onsubmit="submitBulkCalendar(event)">
          <div class="form-group" style="margin-bottom: 14px;">
            <label for="eventType">Î¤ÏÏ€Î¿Ï‚ Î“ÎµÎ³Î¿Î½ÏŒÏ„Î¿Ï‚ *</label>
            <select id="eventType" required style="width: 100%; padding: 10px; border-radius: 8px; border: 2px solid #E39C50;">
              <option value="">Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Ï„ÏÏ€Î¿</option>
              <option value="Î‘Î½Î±Ï€Î»Î®ÏÏ‰ÏƒÎ·">Î‘Î½Î±Ï€Î»Î®ÏÏ‰ÏƒÎ·</option>
              <option value="Î”Î¹Î±Î³ÏÎ½Î¹ÏƒÎ¼Î±">Î”Î¹Î±Î³ÏÎ½Î¹ÏƒÎ¼Î±</option>
              <option value="Î•ÎºÎ´ÏÎ¿Î¼Î®">Î•ÎºÎ´ÏÎ¿Î¼Î®</option>
              <option value="Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ·">Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ·</option>
            </select>
          </div>
          <div class="form-group" style="margin-bottom: 14px;">
            <label for="eventLesson">ÎœÎ¬Î¸Î·Î¼Î± *</label>
            <select id="eventLesson" required style="width: 100%; padding: 10px; border-radius: 8px; border: 2px solid #E39C50;"></select>
          </div>
          <div class="form-row" style="display: flex; gap: 12px; margin-bottom: 14px;">
            <div style="flex:1;">
              <label for="eventDate">Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± *</label>
              <input type="date" id="eventDate" required value="2025-08-26" style="width: 100%; padding: 10px; border-radius: 8px; border: 2px solid #E39C50;">
            </div>
            <div style="flex:1;">
              <label for="eventTime">ÎÏÎ±</label>
              <input type="time" id="eventTime" style="width: 100%; padding: 10px; border-radius: 8px; border: 2px solid #E39C50;">
            </div>
          </div>
          <div class="form-group" style="margin-bottom: 14px;">
            <label for="eventTitle">Î¤Î¯Ï„Î»Î¿Ï‚ *</label>
            <input type="text" id="eventTitle" required placeholder="Ï€.Ï‡. Î‘Î½Î±Ï€Î»Î®ÏÏ‰ÏƒÎ· ÎœÎ±Î¸Î·Î¼Î±Ï„Î¹ÎºÏÎ½" style="width: 100%; padding: 10px; border-radius: 8px; border: 2px solid #E39C50;">
          </div>
          <div class="form-group" style="margin-bottom: 18px;">
            <label for="eventDescription">Î ÎµÏÎ¹Î³ÏÎ±Ï†Î®</label>
            <textarea id="eventDescription" rows="2" placeholder="Î›ÎµÏ€Ï„Î¿Î¼Î­ÏÎµÎ¹ÎµÏ‚ Î³Î¹Î± Ï„Î¿ Î³ÎµÎ³Î¿Î½ÏŒÏ‚..." style="width: 100%; padding: 10px; border-radius: 8px; border: 2px solid #E39C50; font-size: 15px; resize: vertical;"></textarea>
          </div>
          <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 10px;">
            <button type="button" onclick="clearBulkCalendarForm()" style="background: #e1e5e9; color: #E39C50; border: none; padding: 10px 18px; border-radius: 8px; font-weight: bold; font-size: 15px; cursor: pointer;">ğŸ§¹ ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚</button>
            <button type="button" onclick="closeBulkCalendarModal()" style="background: #ffdddd; color: #E39C50; border: none; padding: 10px 18px; border-radius: 8px; font-weight: bold; font-size: 15px; cursor: pointer;">âŒ Î‘ÎºÏÏÏ‰ÏƒÎ·</button>
            <button type="submit" style="background: linear-gradient(135deg, #ff874b, #E39C50); color: white; border: none; padding: 10px 18px; border-radius: 8px; font-weight: bold; font-size: 15px; cursor: pointer;">ğŸ’¾ Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Î“ÎµÎ³Î¿Î½ÏŒÏ„Î¿Ï‚</button>
          </div>
        </form>
        <div id="bulkCalendarStatus" style="margin-top: 18px; color: #E39C50; font-weight: 500;"></div>
      </div>
    </div>

    <style>
      .quick-action-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      }
      
      .student-card {
        background: white;
        border-radius: 10px;
        padding: 15px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        border-left: 4px solid #E39C50;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      
      .student-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      }
      
      .student-card.selected {
        border-left-color: #28a745;
        background: #f8fff8;
      }
      
      .student-card h4 {
        margin: 0 0 8px 0;
        color: #333;
        font-size: 16px;
      }
      
      .student-card p {
        margin: 4px 0;
        color: #666;
        font-size: 14px;
      }
      
      .student-card .actions {
        margin-top: 10px;
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }
      
      .student-card .btn-mini {
        padding: 4px 8px;
        font-size: 12px;
        border-radius: 4px;
      }

      /* Modal styling to match main site design */
      .modal .form-group label {
        color: #4d2c1e !important;
        font-weight: 600;
        margin-bottom: 8px;
        display: block;
      }
      
      .modal input[type="text"],
      .modal input[type="number"],
      .modal input[type="date"],
      .modal input[type="time"],
      .modal select,
      .modal textarea {
        background: #ffffff !important;
        border: 2px solid #ff7e5f !important;
        border-radius: 8px !important;
        padding: 10px !important;
        color: #4d2c1e !important;
        font-weight: 500;
        transition: all 0.3s ease;
        width: 100%;
        box-sizing: border-box;
      }
      
      .modal input[type="text"]:focus,
      .modal input[type="number"]:focus,
      .modal input[type="date"]:focus,
      .modal input[type="time"]:focus,
      .modal select:focus,
      .modal textarea:focus {
        outline: none;
        border-color: #4d2c1e !important;
        box-shadow: 0 0 0 3px rgba(255, 126, 95, 0.2) !important;
        background: #fffdd5 !important;
      }
      
      .modal .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin-bottom: 20px;
      }
      
      .modal .form-group {
        margin-bottom: 20px;
      }
      
      /* Button hover effects */
      .modal button:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      }

      /* Modal centering and positioning */
      .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(77, 44, 30, 0.6);
        backdrop-filter: blur(5px);
        align-items: center;
        justify-content: center;
      }
      
      .modal.show {
        display: flex !important;
      }
      
      .modal-content {
        position: relative;
        margin: auto;
        padding: 30px;
        width: 90%;
        max-height: 90vh;
        overflow-y: auto;
        animation: modalSlideIn 0.3s ease-out;
      }
      
      @keyframes modalSlideIn {
        from {
          opacity: 0;
          transform: translateY(-50px) scale(0.9);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      /* Responsive design for quick action buttons */
      @media (max-width: 768px) {
        .quick-actions-panel div {
          flex-direction: column !important;
          gap: 15px !important;
        }
        
        .quick-action-btn {
          min-width: 250px !important;
          font-size: 16px !important;
        }
      }

      @media (max-width: 480px) {
        .quick-action-btn {
          min-width: 100% !important;
          max-width: 300px !important;
        }
      }

    </style>

    <!-- Announcements Management Section -->
    <section class="announcements-management" style="padding: 40px 20px; background: #f8f9fa; margin-top: 30px;">
      <div style="max-width: 1200px; margin: 0 auto;">
        <h2 style="text-align: center; color: #2C5F4F; margin-bottom: 30px;">ğŸ“¢ Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· Î‘Î½Î±ÎºÎ¿Î¹Î½ÏÏƒÎµÏ‰Î½</h2>
        
        <!-- Add Announcement Form -->
        <div style="background: white; padding: 30px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
          <h3>Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· ÎÎ­Î±Ï‚ Î‘Î½Î±ÎºÎ¿Î¯Î½Ï‰ÏƒÎ·Ï‚</h3>
          <form id="add-announcement-form" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; align-items: end;">
            <div>
              <label for="announcement-title" style="display: block; margin-bottom: 5px; font-weight: bold;">Î¤Î¯Ï„Î»Î¿Ï‚:</label>
              <input type="text" id="announcement-title" required style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px;">
            </div>
            <div>
              <label for="announcement-content" style="display: block; margin-bottom: 5px; font-weight: bold;">Î ÎµÏÎ¹ÎµÏ‡ÏŒÎ¼ÎµÎ½Î¿:</label>
              <input type="text" id="announcement-content" required style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px;">
            </div>
            <button type="submit" style="grid-column: span 2; padding: 12px 20px; background: #E39C50; color: white; border: none; border-radius: 5px; font-weight: bold; cursor: pointer;">
              Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î‘Î½Î±ÎºÎ¿Î¯Î½Ï‰ÏƒÎ·Ï‚
            </button>
          </form>
        </div>

        <!-- Announcements List -->
        <div style="background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
          <h3 style="padding: 20px; margin: 0; background: #2C5F4F; color: white;">Î›Î¯ÏƒÏ„Î± Î‘Î½Î±ÎºÎ¿Î¹Î½ÏÏƒÎµÏ‰Î½</h3>
          <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse;">
              <thead>
                <tr style="background: #f8f9fa;">
                  <th style="padding: 15px; text-align: left; border-bottom: 1px solid #ddd;">ID</th>
                  <th style="padding: 15px; text-align: left; border-bottom: 1px solid #ddd;">Î¤Î¯Ï„Î»Î¿Ï‚</th>
                  <th style="padding: 15px; text-align: left; border-bottom: 1px solid #ddd;">Î ÎµÏÎ¹ÎµÏ‡ÏŒÎ¼ÎµÎ½Î¿</th>
                  <th style="padding: 15px; text-align: left; border-bottom: 1px solid #ddd;">Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î±</th>
                  <th style="padding: 15px; text-align: left; border-bottom: 1px solid #ddd;">Î•Î½Î­ÏÎ³ÎµÎ¹ÎµÏ‚</th>
                </tr>
              </thead>
              <tbody id="announcements-list">
                <!-- Announcements will be loaded here -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </section>
  </main>
  <footer>
    <div class="footer-content">
      <div class="footer-logo">ÎœÎ±Î¸Î·Ï„Î¹ÎºÏŒ Î£Ï„Î­ÎºÎ¹</div>
      <div class="footer-links"  data-id="footer-links">
        <span>ÎšÎ±Î¸Î·Î³Î·Ï„Î­Ï‚:</span>
        <span>...</span>
      </div>
      <div class="footer-map" >
        <img src="map.png" alt="Î§Î¬ÏÏ„Î·Ï‚">
      </div>
    </div>
    <div class="footer-bottom">
      &copy; 2025 ÎœÎ±Î¸Î·Ï„Î¹ÎºÏŒ Î£Ï„Î­ÎºÎ¹
    </div>
  </footer>
    <script src="main.js"></script>
    <script src="client-text.js"></script>
    
    <script>
      // Global variables
      let selectedStudent = null;
      let allStudents = [];
      let allSubjects = [];
      let selectedStudentSubjects = [];
      
      // Initialize page
      document.addEventListener('DOMContentLoaded', function() {
        initializePage();
      });
      
      async function initializePage() {
        try {
          await loadSubjects();
          await loadStudents();
          populateSubjectFilters();
          setDefaultDates();
        } catch (error) {
          console.error('Error initializing page:', error);
          showNotification('Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î· Ï†ÏŒÏÏ„Ï‰ÏƒÎ· Ï„Î·Ï‚ ÏƒÎµÎ»Î¯Î´Î±Ï‚', 'error');
        }
      }
      
      // Load subjects from database
      async function loadSubjects() {
        try {
          const response = await fetch('/api/subjects');
          if (response.ok) {
            allSubjects = await response.json();
          } else {
            console.error('Failed to load subjects');
          }
        } catch (error) {
          console.error('Error loading subjects:', error);
        }
      }
      
      // Load students from database
      async function loadStudents() {
        try {
          console.log('Attempting to load students from server...');
          const response = await fetch('/api/students');
          if (response.ok) {
            const rawStudents = await response.json();
            console.log('Raw students data:', rawStudents);
            
            // Map database fields to frontend expected fields
            allStudents = rawStudents.map(student => ({
              id: student.id,
              firstName: student.first_name,
              lastName: student.last_name,
              studentClass: student.class,
              phone: student.phone,
              email: student.email,
              parentName: student.parentName,
              parentPhone: student.parentPhone,
              address: student.address,
              birthDate: student.birthDate,
              enrollmentDate: student.enrollmentDate,
              status: student.status,
              notes: student.notes
            }));
            
            console.log('Students loaded from server:', allStudents.length);
            console.log('Mapped first student:', allStudents[0]);
            displayStudents(allStudents);
            updateSearchResults(allStudents.length);
          } else {
            console.error('Failed to load students, status:', response.status);
            throw new Error('Server responded with error');
          }
        } catch (error) {
          console.error('Error loading students:', error);
          // Fallback to demo data
          loadDemoData();
        }
      }
      
      // Demo data fallback
      function loadDemoData() {
        console.log('Loading demo data...');
        allStudents = [
          {
            id: 1,
            firstName: 'Î“Î¹Î¬Î½Î½Î·Ï‚',
            lastName: 'Î Î±Ï€Î±Î´ÏŒÏ€Î¿Ï…Î»Î¿Ï‚',
            studentClass: 'Î’\' Î›Ï…ÎºÎµÎ¯Î¿Ï…',
            phone: '6901234567',
            email: 'giannis@example.com',
            parentName: 'ÎšÏÏƒÏ„Î±Ï‚ Î Î±Ï€Î±Î´ÏŒÏ€Î¿Ï…Î»Î¿Ï‚',
            parentPhone: '6907654321',
            enrollmentDate: '2023-09-01',
            status: 'active'
          },
          {
            id: 2,
            firstName: 'ÎœÎ±ÏÎ¯Î±',
            lastName: 'Î“ÎµÏ‰ÏÎ³Î¯Î¿Ï…',
            studentClass: 'Î“\' Î›Ï…ÎºÎµÎ¯Î¿Ï…',
            phone: '6902345678',
            email: 'maria@example.com',
            parentName: 'Î•Î»Î­Î½Î· Î“ÎµÏ‰ÏÎ³Î¯Î¿Ï…',
            parentPhone: '6908765432',
            enrollmentDate: '2022-09-01',
            status: 'active'
          },
          {
            id: 3,
            firstName: 'ÎšÏÏƒÏ„Î±Ï‚',
            lastName: 'Î”Î·Î¼Î·Ï„ÏÎ¯Î¿Ï…',
            studentClass: 'Î‘\' Î›Ï…ÎºÎµÎ¯Î¿Ï…',
            phone: '6903456789',
            email: 'kostas@example.com',
            parentName: 'ÎÎ¯ÎºÎ¿Ï‚ Î”Î·Î¼Î·Ï„ÏÎ¯Î¿Ï…',
            parentPhone: '6909876543',
            enrollmentDate: '2024-09-01',
            status: 'active'
          }
        ];
        
        allSubjects = [
          { id: 1, name: 'ÎœÎ±Î¸Î·Î¼Î±Ï„Î¹ÎºÎ¬', code: 'ÎœÎ³4', class: 'Î“\' Î›Ï…ÎºÎµÎ¯Î¿Ï…' },
          { id: 2, name: 'Î§Î·Î¼ÎµÎ¯Î±', code: 'Î§Î³2', class: 'Î“\' Î›Ï…ÎºÎµÎ¯Î¿Ï…' },
          { id: 3, name: 'Î¦Ï…ÏƒÎ¹ÎºÎ®', code: 'Î¦Î²1', class: 'Î’\' Î›Ï…ÎºÎµÎ¯Î¿Ï…' },
          { id: 4, name: 'Î‘ÏÏ‡Î±Î¯Î±', code: 'Î‘ÏÎ±3', class: 'Î‘\' Î›Ï…ÎºÎµÎ¯Î¿Ï…' },
          { id: 5, name: 'ÎÎ­Î± Î•Î»Î»Î·Î½Î¹ÎºÎ¬', code: 'ÎÎµÎ³1', class: 'Î“\' Î“Ï…Î¼Î½Î±ÏƒÎ¯Î¿Ï…' }
        ];
        
        displayStudents(allStudents);
        populateSubjectFilters();
        updateSearchResults(allStudents.length);
        console.log('Demo data loaded, students count:', allStudents.length);
      }
      
      // Populate subject filter dropdowns
      function populateSubjectFilters() {
        const filterSelects = ['studentSubjectFilter', 'gradeSubject', 'progressSubject', 'calendarSubject'];
        
        filterSelects.forEach(selectId => {
          const select = document.getElementById(selectId);
          if (select) {
            // Clear existing options except first one
            const firstOption = select.firstElementChild;
            select.innerHTML = '';
            select.appendChild(firstOption);
            
            // Add subject options (Ï†Î¹Î»Ï„ÏÎ¬ÏÎ¿Ï…Î¼Îµ Ï„Î¿ "Î“ÎµÎ½Î¹ÎºÏŒ ÎœÎ¬Î¸Î·Î¼Î±")
            allSubjects
              .filter(subject => subject.name !== 'Î“ÎµÎ½Î¹ÎºÏŒ ÎœÎ¬Î¸Î·Î¼Î±')
              .forEach(subject => {
                const option = document.createElement('option');
                option.value = subject.id;
                option.textContent = `${subject.name} (${subject.class})`;
                select.appendChild(option);
              });
          }
        });
      }
      
      // Set default dates
      function setDefaultDates() {
        const today = new Date().toISOString().split('T')[0];
        const dateInputs = ['gradeDate', 'progressDate', 'calendarDate'];
        
        dateInputs.forEach(inputId => {
          const input = document.getElementById(inputId);
          if (input) {
            input.value = today;
          }
        });
      }
      
      // Search students functionality
      function searchStudents() {
        console.log('searchStudents called, allStudents:', allStudents);
        if (!allStudents || allStudents.length === 0) {
          console.log('No students data available');
          return;
        }
        
        const searchTerm = document.getElementById('studentSearchInput').value.toLowerCase();
        const classFilter = document.getElementById('studentClassFilter').value;
        const subjectFilter = document.getElementById('studentSubjectFilter').value;
        
        let filteredStudents = allStudents.filter(student => {
          const matchesSearch = 
            (student.firstName && student.firstName.toLowerCase().includes(searchTerm)) ||
            (student.lastName && student.lastName.toLowerCase().includes(searchTerm)) ||
            (student.phone && student.phone.includes(searchTerm)) ||
            (student.email && student.email.toLowerCase().includes(searchTerm));
          
          const matchesClass = !classFilter || student.studentClass === classFilter;
          
          // For subject filter, we would need to check enrollments
          // For now, we'll just match by class
          const matchesSubject = !subjectFilter || true;
          
          return matchesSearch && matchesClass && matchesSubject;
        });
        
        displayStudents(filteredStudents);
        updateSearchResults(filteredStudents.length);
      }
      
      // Display students in grid
      function displayStudents(students) {
        console.log('displayStudents called with:', students.length, 'students');
        const grid = document.getElementById('studentsGrid');
        grid.innerHTML = '';
        
        if (students.length === 0) {
          grid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 40px; color: #666;">Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ Î¼Î±Î¸Î·Ï„Î­Ï‚</div>';
          return;
        }
        
        students.forEach(student => {
          console.log('Processing student:', student);
          const studentCard = document.createElement('div');
          studentCard.className = 'student-card';
          studentCard.dataset.studentId = student.id;
          
          studentCard.innerHTML = `
            <h4>${student.firstName || 'Î†Î³Î½Ï‰ÏƒÏ„Î¿'} ${student.lastName || 'ÎŒÎ½Î¿Î¼Î±'}</h4>
            <p><strong>Î¤Î¬Î¾Î·:</strong> ${student.studentClass || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            <p><strong>Î¤Î·Î»Î­Ï†Ï‰Î½Î¿:</strong> ${student.phone || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ ÎºÎ±Ï„Î±Ï‡Ï‰ÏÎ·Î¸ÎµÎ¯'}</p>
            <p><strong>Î“Î¿Î½Î­Î±Ï‚:</strong> ${student.parentName || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ ÎºÎ±Ï„Î±Ï‡Ï‰ÏÎ·Î¸ÎµÎ¯'}</p>
            <p><strong>ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·:</strong> <span class="status-${student.status}">${getStatusText(student.status)}</span></p>
            <div class="actions">
              <button class="btn btn-mini btn-success" onclick="selectStudent(${student.id})">
                 Î•Ï€Î¹Î»Î¿Î³Î®
              </button>
              <button class="btn btn-mini btn-info" onclick="viewStudentDetails(${student.id})">
                 Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î±
              </button>
              <button class="btn btn-mini btn-warning" onclick="viewStudentGrades(${student.id})">
                 Î’Î±Î¸Î¼Î¿Î¯
              </button>
            </div>
          `;
          
          grid.appendChild(studentCard);
        });
      }
      
      // Get status text
      function getStatusText(status) {
        const statusMap = {
          'active': 'Î•Î½ÎµÏÎ³ÏŒÏ‚',
          'inactive': 'Î‘Î½ÎµÎ½ÎµÏÎ³ÏŒÏ‚',
          'graduated': 'Î‘Ï€ÏŒÏ†Î¿Î¹Ï„Î¿Ï‚'
        };
        return statusMap[status] || status;
      }
      
      // Update search results count
      function updateSearchResults(count) {
        const countElement = document.getElementById('searchResultsCount');
        countElement.textContent = `Î’ÏÎ­Î¸Î·ÎºÎ±Î½ ${count} Î¼Î±Î¸Î·Ï„Î­Ï‚`;
      }
      
      // Select a student
      async function selectStudent(studentId) {
        const student = allStudents.find(s => s.id === studentId);
        if (!student) return;
        
        selectedStudent = student;
        
        // Update UI
        document.querySelectorAll('.student-card').forEach(card => {
          card.classList.remove('selected');
        });
        
        const selectedCard = document.querySelector(`[data-student-id="${studentId}"]`);
        if (selectedCard) {
          selectedCard.classList.add('selected');
        }
        
        // Show selected student info
        const display = document.getElementById('selectedStudentDisplay');
        const info = document.getElementById('selectedStudentInfo');
        
        info.innerHTML = `
          <div><strong>ÎŒÎ½Î¿Î¼Î±:</strong> ${student.firstName} ${student.lastName}</div>
          <div><strong>Î¤Î¬Î¾Î·:</strong> ${student.studentClass}</div>
          <div><strong>Î¤Î·Î»Î­Ï†Ï‰Î½Î¿:</strong> ${student.phone}</div>
          <div><strong>Email:</strong> ${student.email || 'Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹'}</div>
          <div><strong>Î“Î¿Î½Î­Î±Ï‚:</strong> ${student.parentName || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ ÎºÎ±Ï„Î±Ï‡Ï‰ÏÎ·Î¸ÎµÎ¯'}</div>
          <div><strong>Î¤Î·Î». Î“Î¿Î½Î­Î±:</strong> ${student.parentPhone || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ ÎºÎ±Ï„Î±Ï‡Ï‰ÏÎ·Î¸ÎµÎ¯'}</div>
        `;
        
        display.style.display = 'block';
        
        // Load student's enrolled subjects
        await loadStudentSubjects(studentId);
        
        // Update modal forms
        updateModalForms(student);
        
        showNotification(`Î•Ï€Î¹Î»Î­Ï‡Î¸Î·ÎºÎµ Î¿/Î· Î¼Î±Î¸Î·Ï„Î®Ï‚/Ï„ÏÎ¹Î±: ${student.firstName} ${student.lastName}`, 'success');
      }
      
      // Load subjects that the student is enrolled in
      async function loadStudentSubjects(studentId) {
        try {
          const response = await fetch(`/api/enrollments?studentId=${studentId}`);
          if (response.ok) {
            const enrollments = await response.json();
            console.log('Student enrollments:', enrollments);
            
            // Extract subject information from enrollments
            selectedStudentSubjects = enrollments.map(enrollment => ({
              id: enrollment.class_id, // This is actually the subject_id from Subjects table
              name: enrollment.subject_name,
              code: enrollment.subject_code,
              class: enrollment.subject_class,
              teacher: enrollment.teacher_name
            }));
            
            console.log('Student subjects:', selectedStudentSubjects);
            
            // Update subject dropdowns in modals
            updateSubjectDropdowns();
            
          } else {
            console.error('Failed to load student subjects');
            selectedStudentSubjects = [];
          }
        } catch (error) {
          console.error('Error loading student subjects:', error);
          selectedStudentSubjects = [];
        }
      }
      
      // Update subject dropdowns to show only enrolled subjects
      function updateSubjectDropdowns() {
        const subjectSelects = ['gradeSubject', 'progressSubject', 'calendarSubject'];
        
        subjectSelects.forEach(selectId => {
          const select = document.getElementById(selectId);
          if (select) {
            // Clear existing options except first one
            const firstOption = select.querySelector('option[value=""]');
            select.innerHTML = '';
            if (firstOption) {
              select.appendChild(firstOption.cloneNode(true));
            } else {
              const defaultOption = document.createElement('option');
              defaultOption.value = '';
              defaultOption.textContent = 'Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Î¼Î¬Î¸Î·Î¼Î±';
              select.appendChild(defaultOption);
            }
            
            // Add enrolled subjects only
            selectedStudentSubjects.forEach(subject => {
              const option = document.createElement('option');
              option.value = subject.id;
              option.textContent = `${subject.name} (${subject.code})`;
              select.appendChild(option);
            });
          }
        });
      }

      // Update modal forms with selected student
      function updateModalForms(student) {
        const studentInfo = `${student.firstName} ${student.lastName} - ${student.studentClass}`;
        
        const infoElements = [
          'gradeStudentInfo',
          'progressStudentInfo', 
          'calendarStudentInfo'
        ];
        
        infoElements.forEach(elementId => {
          const element = document.getElementById(elementId);
          if (element) {
            element.innerHTML = `
              <strong>ÎœÎ±Î¸Î·Ï„Î®Ï‚:</strong> ${studentInfo}<br>
              <strong>Î¤Î·Î»Î­Ï†Ï‰Î½Î¿:</strong> ${student.phone}
            `;
          }
        });
      }
      
      // Clear selected student
      function clearSelectedStudent() {
        selectedStudent = null;
        
        document.querySelectorAll('.student-card').forEach(card => {
          card.classList.remove('selected');
        });
        
        document.getElementById('selectedStudentDisplay').style.display = 'none';
        
        showNotification('Î— ÎµÏ€Î¹Î»Î¿Î³Î® Î¼Î±Î¸Î·Ï„Î® ÎºÎ±Î¸Î±ÏÎ¯ÏƒÏ„Î·ÎºÎµ', 'info');
      }
      
      // Refresh student list
      function refreshStudentList() {
        document.getElementById('studentSearchInput').value = '';
        document.getElementById('studentClassFilter').value = '';
        document.getElementById('studentSubjectFilter').value = '';
        loadStudents();
      }
      
      // Modal functions
      function openGradesModal() {
        if (!selectedStudent) {
          showNotification('Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÏ€Î¹Î»Î­Î¾Ï„Îµ Ï€ÏÏÏ„Î± Î­Î½Î±Î½ Î¼Î±Î¸Î·Ï„Î®', 'warning');
          return;
        }
        document.getElementById('gradesModal').style.display = 'block';
      }
      
      function closeGradesModal() {
        document.getElementById('gradesModal').style.display = 'none';
        document.getElementById('gradesForm').reset();
        setDefaultDates();
      }
      
      function openProgressModal() {
        if (!selectedStudent) {
          showNotification('Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÏ€Î¹Î»Î­Î¾Ï„Îµ Ï€ÏÏÏ„Î± Î­Î½Î±Î½ Î¼Î±Î¸Î·Ï„Î®', 'warning');
          return;
        }
        document.getElementById('progressModal').style.display = 'block';
      }
      
      function closeProgressModal() {
        document.getElementById('progressModal').style.display = 'none';
        document.getElementById('progressForm').reset();
        setDefaultDates();
      }
      
      function openCalendarModal() {
        if (!selectedStudent) {
          showNotification('Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÏ€Î¹Î»Î­Î¾Ï„Îµ Ï€ÏÏÏ„Î± Î­Î½Î±Î½ Î¼Î±Î¸Î·Ï„Î®', 'warning');
          return;
        }
        document.getElementById('calendarModal').style.display = 'block';
      }
      
      function closeCalendarModal() {
        document.getElementById('calendarModal').style.display = 'none';
        document.getElementById('calendarForm').reset();
        setDefaultDates();
      }

      function openBulkCalendarModal() {
        document.getElementById('bulkCalendarModal').style.display = 'block';
        loadAllLessons();
      }
      
      function closeBulkCalendarModal() {
        document.getElementById('bulkCalendarModal').style.display = 'none';
      }
      
      // Functions Î³Î¹Î± ÎºÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒ forms Ï‡Ï‰ÏÎ¯Ï‚ ÎºÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿ Ï„Ï‰Î½ modals
      function clearGradesForm() {
        document.getElementById('gradeSubject').value = '';
        document.getElementById('gradeType').value = '';
        document.getElementById('gradeValue').value = '';
        document.getElementById('gradeDate').value = '';
        document.getElementById('gradeComments').value = '';
        setDefaultDates();
        showNotification('Î¤Î± Ï€ÎµÎ´Î¯Î± ÎºÎ±Î¸Î±ÏÎ¯ÏƒÏ„Î·ÎºÎ±Î½', 'info');
      }
      
      function clearProgressForm() {
        document.getElementById('progressSubject').value = '';
        document.getElementById('progressNote').value = '';
        document.getElementById('progressDate').value = '';
        document.getElementById('progressRating').value = '';
        setDefaultDates();
        showNotification('Î¤Î± Ï€ÎµÎ´Î¯Î± ÎºÎ±Î¸Î±ÏÎ¯ÏƒÏ„Î·ÎºÎ±Î½', 'info');
      }
      
      function clearCalendarForm() {
        document.getElementById('calendarTitle').value = '';
        document.getElementById('calendarDescription').value = '';
        document.getElementById('calendarDate').value = '';
        document.getElementById('calendarTime').value = '';
        document.getElementById('calendarEventType').value = '';
        document.getElementById('calendarSubject').value = '';
        setDefaultDates();
        showNotification('Î¤Î± Ï€ÎµÎ´Î¯Î± ÎºÎ±Î¸Î±ÏÎ¯ÏƒÏ„Î·ÎºÎ±Î½', 'info');
      }
      
      // Form submission handlers
      document.getElementById('gradesForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        if (!selectedStudent) {
          showNotification('Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ ÎµÏ€Î¹Î»ÎµÎ³ÎµÎ¯ Î¼Î±Î¸Î·Ï„Î®Ï‚', 'error');
          return;
        }
        
        const formData = new FormData(this);
        const gradeData = {
          studentId: selectedStudent.id,
          subjectId: document.getElementById('gradeSubject').value,
          examType: document.getElementById('gradeType').value,
          grade: parseFloat(document.getElementById('gradeValue').value),
          examDate: document.getElementById('gradeDate').value,
          notes: document.getElementById('gradeComments').value
        };
        
        console.log(' Sending grade data:', gradeData);
        console.log(' Selected student subjects:', selectedStudentSubjects);
        
        try {
          const response = await fetch('/api/grades', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(gradeData)
          });
          
          if (response.ok) {
            showNotification(' ÎŸ Î²Î±Î¸Î¼ÏŒÏ‚ Î±Ï€Î¿Î¸Î·ÎºÎµÏÏ„Î·ÎºÎµ ÎµÏ€Î¹Ï„Ï…Ï‡ÏÏ‚! ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Ï€ÏÎ¿ÏƒÎ¸Î­ÏƒÎµÏ„Îµ Î¬Î»Î»Î¿Î½ Î²Î±Î¸Î¼ÏŒ Î® Î½Î± ÎºÎ»ÎµÎ¯ÏƒÎµÏ„Îµ Ï„Î¿ Ï€Î±ÏÎ¬Î¸Ï…ÏÎ¿.', 'success');
            const result = await response.json();
            console.log('Grade saved response:', result);
            
            // Optionally, you can keep the modal open and just clear the form
            // closeGradesModal();
            // clearGradesForm();
          } else {
            const errorText = await response.text();
            console.error('Failed to save grade, status:', response.status, 'Response:', errorText);
            showNotification('Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î·Î½ Î±Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Ï„Î¿Ï… Î²Î±Î¸Î¼Î¿Ï: ' + errorText, 'error');
          }
        } catch (error) {
          console.error('Error saving grade:', error);
          showNotification('Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î·Î½ Î±Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Ï„Î¿Ï… Î²Î±Î¸Î¼Î¿Ï', 'error');
        }
      });
      
      document.getElementById('progressForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        if (!selectedStudent) {
          showNotification('Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ ÎµÏ€Î¹Î»ÎµÎ³ÎµÎ¯ Î¼Î±Î¸Î·Ï„Î®Ï‚', 'error');
          return;
        }
        
        const formData = new FormData(this);
        const progressData = {
          studentId: selectedStudent.id,
          subjectId: document.getElementById('progressSubject').value,
          date: document.getElementById('progressDate').value,
          note: document.getElementById('progressNote').value,
          rating: document.getElementById('progressRating').value
        };
        
        console.log(' Sending progress data:', progressData);
        
        try {
          const response = await fetch('/api/progress', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(progressData)
          });
          
          if (response.ok) {
            showNotification(' Î— Ï€ÏÏŒÎ¿Î´Î¿Ï‚ Î±Ï€Î¿Î¸Î·ÎºÎµÏÏ„Î·ÎºÎµ ÎµÏ€Î¹Ï„Ï…Ï‡ÏÏ‚! ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Ï€ÏÎ¿ÏƒÎ¸Î­ÏƒÎµÏ„Îµ Î¬Î»Î»Î· ÎºÎ±Ï„Î±Ï‡ÏÏÎ·ÏƒÎ· Î® Î½Î± ÎºÎ»ÎµÎ¯ÏƒÎµÏ„Îµ Ï„Î¿ Ï€Î±ÏÎ¬Î¸Ï…ÏÎ¿.', 'success');
            const result = await response.json();
            console.log('Progress saved response:', result);
          } else {
            const errorText = await response.text();
            console.error('Failed to save progress, status:', response.status, 'Response:', errorText);
            showNotification('Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î·Î½ Î±Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Ï„Î·Ï‚ Ï€ÏÏŒÎ¿Î´Î¿Ï…: ' + errorText, 'error');
          }
        } catch (error) {
          console.error('Error saving progress:', error);
          showNotification('Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î·Î½ Î±Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Ï„Î·Ï‚ Ï€ÏÏŒÎ¿Î´Î¿Ï…', 'error');
        }
      });
      
      document.getElementById('calendarForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        if (!selectedStudent) {
          showNotification('Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ ÎµÏ€Î¹Î»ÎµÎ³ÎµÎ¯ Î¼Î±Î¸Î·Ï„Î®Ï‚', 'error');
          return;
        }
        
        const formData = new FormData(this);
        const eventData = {
          studentId: selectedStudent.id,
          title: document.getElementById('calendarTitle').value,
          description: document.getElementById('calendarDescription').value,
          entryDate: document.getElementById('calendarDate').value,
          eventType: document.getElementById('calendarEventType').value,
          subjectId: document.getElementById('calendarSubject').value,
          time: document.getElementById('calendarTime').value
        };
        
        console.log(' Sending event data:', eventData);
        
        try {
          const response = await fetch('/api/events', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(eventData)
          });
          
          if (response.ok) {
            const result = await response.json();
            console.log('Event saved response:', result);
            
            showNotification('ğŸ“… Î¤Î¿ Î³ÎµÎ³Î¿Î½ÏŒÏ‚ Î±Ï€Î¿Î¸Î·ÎºÎµÏÏ„Î·ÎºÎµ ÎµÏ€Î¹Ï„Ï…Ï‡ÏÏ‚!', 'success');
            // ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Ï†ÏŒÏÎ¼Î±Ï‚ Ï‡Ï‰ÏÎ¯Ï‚ ÎºÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿ Ï„Î¿Ï… modal
            clearCalendarForm();
          } else {
            const errorText = await response.text();
            console.error('Failed to save event, status:', response.status, 'Response:', errorText);
            showNotification('Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î·Î½ Î±Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Ï„Î¿Ï… Î³ÎµÎ³Î¿Î½ÏŒÏ„Î¿Ï‚: ' + errorText, 'error');
          }
        } catch (error) {
          console.error('Error saving event:', error);
          showNotification('Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î·Î½ Î±Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Ï„Î¿Ï… Î³ÎµÎ³Î¿Î½ÏŒÏ„Î¿Ï‚', 'error');
        }
      });

      async function submitBulkCalendar(e) {
        e.preventDefault();
const eventData = {
  eventType: document.getElementById('eventType').value || 'other',
  subjectId: document.getElementById('eventLesson').value || null,
  date: document.getElementById('eventDate').value || null,
  time: document.getElementById('eventTime').value || null,
  title: document.getElementById('eventTitle').value || null,
  description: document.getElementById('eventDescription').value || null,
  class: document.getElementById('bulkClassSelect')?.value || null
};
        console.log('Sending bulk event data:', eventData);
        try {
          const response = await fetch('/api/events/bulk', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(eventData)
          });
          if (response.ok) {
            const result = await response.json();
            console.log('Bulk event saved response:', result);
            showNotification('ğŸ“… Î¤Î¿ Î³ÎµÎ³Î¿Î½ÏŒÏ‚ Î±Î½Î±ÏÏ„Î®Î¸Î·ÎºÎµ ÏƒÎµ ÏŒÎ»Î¿Ï…Ï‚ Ï„Î¿Ï…Ï‚ Î¼Î±Î¸Î·Ï„Î­Ï‚ Ï„Î¿Ï… Ï„Î¼Î®Î¼Î±Ï„Î¿Ï‚!', 'success');
            clearBulkCalendarForm();
          } else {
            const errorText = await response.text();
            console.error('Failed to save bulk event, status:', response.status, 'Response:', errorText);
            showNotification('Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î·Î½ Î±Î½Î¬ÏÏ„Î·ÏƒÎ· Ï„Î¿Ï… Î³ÎµÎ³Î¿Î½ÏŒÏ„Î¿Ï‚: ' + errorText, 'error');
          }
        } catch (error) {
          console.error('Error saving bulk event:', error);
          showNotification('Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î·Î½ Î±Î½Î¬ÏÏ„Î·ÏƒÎ· Ï„Î¿Ï… Î³ÎµÎ³Î¿Î½ÏŒÏ„Î¿Ï‚', 'error');
        }
      }
      // Function to show notifications
      function showNotification(message, type = 'info') {
        // Create notification container if it doesn't exist
        let container = document.getElementById('notificationContainer');
        if (!container) {
          container = document.createElement('div');
          container.id = 'notificationContainer';
          container.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
            max-width: 400px;
            pointer-events: none;
          `;
          document.body.appendChild(container);
        }

        // Create notification element
        const notification = document.createElement('div');
        notification.style.cssText = `
          background: ${type === 'success' ? '#d4edda' : type === 'error' ? '#f8d7da' : '#d1ecf1'};
          color: ${type === 'success' ? '#155724' : type === 'error' ? '#721c24' : '#0c5460'};
          border: 1px solid ${type === 'success' ? '#c3e6cb' : type === 'error' ? '#f5c6cb' : '#bee5eb'};
          border-radius: 8px;
          padding: 15px;
          margin-bottom: 10px;
          box-shadow: 0 4px 12px rgba(0,0,0,0.1);
          pointer-events: auto;
          transform: translateX(100%);
          opacity: 0;
          transition: all 0.3s ease;
          font-size: 14px;
          line-height: 1.4;
          word-wrap: break-word;
        `;
        
        notification.innerHTML = `
          <div style="display: flex; justify-content: space-between; align-items: flex-start;">
            <div style="flex: 1; margin-right: 10px;">${message}</div>
            <button onclick="this.parentElement.parentElement.remove()" style="
              background: none;
              border: none;
              font-size: 18px;
              cursor: pointer;
              color: inherit;
              opacity: 0.7;
              padding: 0;
              line-height: 1;
            ">&times;</button>
          </div>
        `;

        container.appendChild(notification);

        // Animate in
        setTimeout(() => {
          notification.style.transform = 'translateX(0)';
          notification.style.opacity = '1';
        }, 10);

        // Auto remove after 5 seconds
        setTimeout(() => {
          if (notification.parentElement) {
            notification.style.transform = 'translateX(100%)';
            notification.style.opacity = '0';
            setTimeout(() => {
              if (notification.parentElement) {
                notification.remove();
              }
            }, 300);
          }
        }, 5000);
      }

      async function loadAllLessons() {
        try {
          const response = await fetch('/api/subjects');
          if (response.ok) {
            const subjects = await response.json();
            const select = document.getElementById('eventLesson');
            select.innerHTML = '';
            const defaultOption = document.createElement('option');
            defaultOption.value = '';
            defaultOption.textContent = 'Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Î¼Î¬Î¸Î·Î¼Î±';
            select.appendChild(defaultOption);
            subjects.forEach(subject => {
              const option = document.createElement('option');
              option.value = subject.id;
              option.textContent = subject.name + (subject.code ? ` (${subject.code})` : '');
              select.appendChild(option);
            });
          }
        } catch (error) {
          console.error('Error loading lessons:', error);
        }
      }
      document.getElementById('bulkCalendarModal').addEventListener('show', loadAllLessons);
      function clearBulkCalendarForm() {
        document.getElementById('bulkCalendarForm').reset();
      }
    </script>
    <script src="announcements.js"></script>
</body>
</html>
