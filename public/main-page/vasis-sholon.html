<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Βάσεις Σχολών - Μαθητικό Στέκι</title>
  <link rel="stylesheet" href="../style.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;400&display=swap" rel="stylesheet">
  <style>
    /* Ensure header and footer are visible */
    body {
      display: block !important;
      visibility: visible !important;
      margin: 0;
      padding: 0;
      font-family: 'Montserrat', sans-serif;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .main-content {
      display: flex;
      gap: 30px;
      margin-top: 20px;
    }
    .filters-sidebar {
      flex: 0 0 250px;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    .filter-dropdown {
      position: relative;
    }
    .filter-button {
      width: 100%;
      background: #f08955;
      border: 2px solid transparent;
      border-radius: 15px;
      padding: 8px 40px 8px 16px;
      font-size: 16px;
      font-weight: 500;
      color: #eaeaea;
      text-align: left;
      cursor: pointer;
      transition: all 0.2s ease;
      position: relative;
    }
    .filter-button:hover {
      background: #cf5b20;
      border-color: #ffffff;
    }
    .filter-button.active {
      background: #cf5b20;
      border-color: #ffffff;
    }
    .filter-button::after {
      content: '▼';
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 12px;
      transition: transform 0.2s ease;
    }
    .filter-button.active::after {
      transform: translateY(-50%) rotate(180deg);
    }
    .filter-options {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: white;
      border: 1px solid #ffb8a1;
      border-top: none;
      border-radius: 0 0 8px 8px;
      max-height: 200px;
      overflow-y: auto;
      z-index: 1000;
      display: none;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    .filter-options.show {
      display: block;
    }
    .filter-option {
      padding: 10px 16px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      border-bottom: 1px solid #faf9f8;
    }
    .filter-option:hover {
      background: #ffcaa7;
    }
    .filter-option:last-child {
      border-bottom: none;
    }
    .filter-option.selected {
      background: #fdf0e3;
      color: #d25a19;
      font-weight: 500;
    }
    .content-area {
      flex: 1;
    }
    .clear-filters-btn {
      background: #461e00;
      color: white;
      border: none;
      padding: 12px 16px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: background-color 0.2s ease;
      margin-top: 10px;
    }
    .clear-filters-btn:hover {
      background: #d86710;
    }
    @media (max-width: 768px) {
      .main-content {
        flex-direction: column;
      }
      .filters-sidebar {
        flex: none;
        width: 100%;
      }
      .filter-dropdown {
        margin-bottom: 10px;
      }
    }
    
    .pdf-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .pdf-item {
      background: white;
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      transition: transform 0.2s;
    }
    
    .pdf-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    }
    
    .pdf-header {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .pdf-icon {
      width: 40px;
      height: 40px;
      margin-right: 15px;
      color: #d32f2f;
    }
    
    .pdf-title {
      font-weight: bold;
      font-size: 16px;
      color: #5b3c2a;
      margin: 0;
    }
    
    .pdf-info {
      margin-bottom: 15px;
    }
    
    .pdf-meta {
      display: flex;
      justify-content: space-between;
      font-size: 14px;
      color: #666;
      margin-bottom: 5px;
    }
    
    .pdf-description {
      font-size: 14px;
      color: #666;
      line-height: 1.4;
    }
    
    .pdf-actions {
      display: flex;
      gap: 10px;
    }
    
    .btn-view {
      flex: 1;
      background: #28a745;
      color: white;
      border: none;
      padding: 10px;
      border-radius: 5px;
      cursor: pointer;
      text-decoration: none;
      text-align: center;
      font-size: 14px;
    }
    
    .btn-view:hover {
      background: #218838;
    }
    
    .btn-download {
      flex: 1;
      background: #007bff;
      color: white;
      border: none;
      padding: 10px;
      border-radius: 5px;
      cursor: pointer;
      text-decoration: none;
      text-align: center;
      font-size: 14px;
    }
    
    .btn-download:hover {
      background: #0056b3;
    }
    
    .loading {
      text-align: center;
      padding: 40px;
      color: #666;
      font-size: 18px;
    }
    
    .no-files {
      text-align: center;
      padding: 40px;
      color: #666;
    }
    
    .no-files h3 {
      margin-bottom: 10px;
    }
    
    .pdf-badge {
      display: inline-block;
      background: #5b3c2a;
      color: white;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 12px;
      margin-left: 10px;
    }
    
    .info-notice {
      background: #fff3cd;
      border: 1px solid #ffeeba;
      color: #856404;
      padding: 15px;
      border-radius: 5px;
      margin-bottom: 20px;
    }
    
    .info-notice a {
      color: #5b3c2a;
      font-weight: bold;
    }
    
    .description-section {
      background: #e8f4f8;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 30px;
      border-left: 4px solid #007bff;
    }
    
    .description-section h2 {
      margin-top: 0;
      color: #5b3c2a;
    }

  </style>
</head>
<body>
    <header>
    <div class="topbar">
      <div class="logo"><img src="logo.png" alt="logo"></div>
      <nav>
        <a href="#">Αρχική Σελίδα</a>
        <a href="#">Προγράμματα</a>
        <a href="#">Πανελλαδικές Εξετάσεις</a>
        <a href="#">Φωτογραφίες</a>
        <a href="#">Σχετικά με εμάς</a>
      </nav>
      <div class="icons">
        <a href="#"><img src="\elements\Group 17.svg" alt="fb" class="facebook-icon"></a>
        <a href="#"><img src="\elements\mdi_instagram.svg" alt="insta" class="instagram-icon"></a>
        <a href="#"><img src="\elements\phone.svg" alt="phone"></a>
        <a href="#"><img src="\elements\mail.svg" alt="mail"></a>
      </div>
      <a href="../index2.html" class="login-btn" style="text-decoration: none;">Είσοδος</a>
    </div>
  </header>
  
  <main>
      <div class="container">
        <h1>Βάσεις Σχολών</h1>
        <div class="main-content">
          <!-- Sidebar φίλτρων -->
          <div class="filters-sidebar">
            <div class="filter-dropdown">
              <button class="filter-button" id="lykeio-btn">Λύκειο</button>
              <div class="filter-options" id="lykeio-options">
                <div class="filter-option" data-value="">Όλα τα Λύκεια</div>
                <div class="filter-option" data-value="ΓΕΛ">ΓΕΛ (Γενικό Λύκειο)</div>
                <div class="filter-option" data-value="ΕΠΑΛ">ΕΠΑΛ (Επαγγελματικό Λύκειο)</div>
              </div>
            </div>
            <div class="filter-dropdown">
              <button class="filter-button" id="year-btn">Έτος</button>
              <div class="filter-options" id="year-options">
                <div class="filter-option" data-value="">Όλα τα έτη</div>
                <div class="filter-option" data-value="2024">2024</div>
                <div class="filter-option" data-value="2023">2023</div>
                <div class="filter-option" data-value="2022">2022</div>
                <div class="filter-option" data-value="2021">2021</div>
                <div class="filter-option" data-value="2020">2020</div>
              </div>
            </div>
            <div class="filter-dropdown">
              <button class="filter-button" id="field-btn">Πεδίο Σπουδών</button>
              <div class="filter-options" id="field-options">
                <div class="filter-option" data-value="">Όλα τα πεδία</div>
                <div class="filter-option" data-value="Θετικές Επιστήμες">Θετικές Επιστήμες</div>
                <div class="filter-option" data-value="Ανθρωπιστικές Επιστήμες">Ανθρωπιστικές Επιστήμες</div>
                <div class="filter-option" data-value="Οικονομικές Επιστήμες">Οικονομικές Επιστήμες</div>
                <div class="filter-option" data-value="Τεχνολογικές Επιστήμες">Τεχνολογικές Επιστήμες</div>
                <div class="filter-option" data-value="Επιστήμες Υγείας">Επιστήμες Υγείας</div>
                <div class="filter-option" data-value="Τουρισμός">Τουρισμός</div>
              </div>
            </div>
            <button id="clear-filters-btn" class="clear-filters-btn">Καθαρισμός Φίλτρων</button>
          </div>
          <!-- Περιεχόμενο δεξιά -->
          <div class="content-area">
            <!-- Περιγραφή σελίδας -->
            <div class="description-section">
              <h2>Τι θα βρείτε εδώ</h2>
              <p>Σε αυτή τη σελίδα θα βρείτε πληροφορίες και αρχεία σχετικά με τις βάσεις εισαγωγής στις σχολές των ελληνικών πανεπιστημίων. Μπορείτε να φιλτράρετε τα αποτελέσματα με βάση το έτος, τον τύπο λυκείου και το πεδίο σπουδών για να βρείτε εύκολα τις πληροφορίες που σας ενδιαφέρουν.</p>
            </div>
            
            <!-- Πληροφορίες αρχείων -->
            <div id="files-info" class="info-notice" style="display: none;">
              <strong> Πληροφορίες:</strong> 
              <span id="files-count-text"></span>
            </div>
            
            <!-- Περιοχή PDF αρχείων -->
            <div id="pdf-container" class="pdf-grid">
              <!-- Τα PDF θα φορτωθούν δυναμικά από JavaScript -->
              <div class="loading">Φόρτωση βάσεων σχολών...</div>
            </div>
            
            <!-- Μήνυμα όταν δεν υπάρχουν αρχεία -->
            <div id="no-files-message" class="no-files" style="display: none;">
              <h3>Δεν υπάρχουν διαθέσιμα αρχεία</h3>
              <p>Δεν βρέθηκαν αρχεία βάσεων σχολών που να ταιριάζουν με τα κριτήρια αναζήτησης.</p>
            </div>
          </div>
        </div>
      </div>
  </main>
  <footer>
    <div class="footer-content">
      <div class="footer-logo">Μαθητικό Στέκι</div>
      <div class="footer-links"  data-id="footer-links">
        <span>Καθηγητές:</span>
        <span>...</span>
      </div>
      <div class="footer-map" >
        <img src="map.png" alt="Χάρτης">
      </div>
    </div>
    <div class="footer-bottom">
      &copy; 2025 Μαθητικό Στέκι
    </div>
  </footer>
  <script src="../main.js"></script>
  <script src="../client-text.js"></script>
  <script>
// Μεταβλητές για τα φίλτρα
let currentFilters = {
  lykeio: '',
  year: '',
  field: ''
};

// Dropdown functionality
function initializeDropdowns() {
  const dropdownButtons = document.querySelectorAll('.filter-button');
  dropdownButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.stopPropagation();
      const dropdownId = this.id.replace('-btn', '-options');
      const dropdown = document.getElementById(dropdownId);
      const isOpen = dropdown.classList.contains('show');
      document.querySelectorAll('.filter-options').forEach(opt => {
        opt.classList.remove('show');
      });
      document.querySelectorAll('.filter-button').forEach(btn => {
        btn.classList.remove('active');
      });
      if (!isOpen) {
        dropdown.classList.add('show');
        this.classList.add('active');
      }
    });
  });
  document.addEventListener('click', function(e) {
    if (e.target.classList.contains('filter-option')) {
      handleFilterOptionClick(e.target);
    }
  });
  document.addEventListener('click', function(e) {
    if (!e.target.closest('.filter-dropdown')) {
      document.querySelectorAll('.filter-options').forEach(opt => {
        opt.classList.remove('show');
      });
      document.querySelectorAll('.filter-button').forEach(btn => {
        btn.classList.remove('active');
      });
    }
  });
  // Διόρθωση: χρήση του σωστού id για το κουμπί καθαρισμού φίλτρων με έλεγχο ύπαρξης
  var clearBtn = document.getElementById('clear-filters-btn');
  if (clearBtn) {
    clearBtn.addEventListener('click', function() {
      clearAllFilters();
    });
  }
}
function handleFilterOptionClick(option) {
  const dropdown = option.parentElement;
  const dropdownId = dropdown.id;
  const buttonId = dropdownId.replace('-options', '-btn');
  const button = document.getElementById(buttonId);
  const value = option.dataset.value;
  const text = option.textContent;
  if (value === '' && dropdownId === 'field-options') {
    button.textContent = 'Πεδίο Σπουδών';
  } else if (value === '' && dropdownId === 'lykeio-options') {
    button.textContent = 'Λύκειο';
  } else if (value === '' && dropdownId === 'year-options') {
    button.textContent = 'Έτος';
  } else {
    button.textContent = text;
  }
  const filterType = dropdownId.replace('-options', '');
  currentFilters[filterType] = value;
  filterPDFs();
}
function clearAllFilters() {
  currentFilters = { lykeio: '', year: '', field: '' };
  document.getElementById('lykeio-btn').textContent = 'Λύκειο';
  document.getElementById('year-btn').textContent = 'Έτος';
  document.getElementById('field-btn').textContent = 'Πεδίο Σπουδών';
  filterPDFs();
}
document.addEventListener('DOMContentLoaded', function() {
  initializeDropdowns();
  loadPDFs();
});

    // Δυναμική φόρτωση PDF αρχείων βάσεων σχολών
    let allPDFs = [];
    
    // Εικονικά δεδομένα για επίδειξη - θα αντικατασταθούν με πραγματικά από backend
    const samplePDFs = [
      {
        id: 1,
        title: "Βάσεις Θετικών Επιστημών 2024",
        year: "2024",
        lykeio: "ΓΕΛ",
        field: "Θετικές Επιστήμες",
        description: "Βάσεις εισαγωγής για τις σχολές θετικών επιστημών",
        filename: "vaseis_thetikes_2024.pdf",
        file_size: "1.2 MB",
        upload_date: "2024-01-15"
      },
      {
        id: 2,
        title: "Βάσεις Ανθρωπιστικών Σπουδών 2024",
        year: "2024",
        lykeio: "ΓΕΛ", 
        field: "Ανθρωπιστικές Επιστήμες",
        description: "Βάσεις εισαγωγής για τις σχολές ανθρωπιστικών επιστημών",
        filename: "vaseis_anthropistikes_2024.pdf",
        file_size: "950 KB",
        upload_date: "2024-01-15"
      },
      {
        id: 3,
        title: "Βάσεις ΕΠΑΛ Τεχνολογικών 2024",
        year: "2024",
        lykeio: "ΕΠΑΛ",
        field: "Τεχνολογικές Επιστήμες",
        description: "Βάσεις εισαγωγής για τις τεχνολογικές σχολές από ΕΠΑΛ",
        filename: "vaseis_epal_tech_2024.pdf",
        file_size: "850 KB",
        upload_date: "2024-01-10"
      },
      {
        id: 4,
        title: "Βάσεις Οικονομικών Σπουδών 2023",
        year: "2023",
        lykeio: "ΓΕΛ",
        field: "Οικονομικές Επιστήμες",
        description: "Βάσεις εισαγωγής για τις σχολές οικονομικών επιστημών",
        filename: "vaseis_oikonomikes_2023.pdf",
        file_size: "1.1 MB",
        upload_date: "2023-07-20"
      },
      {
        id: 5,
        title: "Βάσεις Επιστημών Υγείας 2024",
        year: "2024",
        lykeio: "ΓΕΛ",
        field: "Επιστήμες Υγείας",
        description: "Βάσεις εισαγωγής για τις σχολές επιστημών υγείας",
        filename: "vaseis_ygeias_2024.pdf",
        file_size: "1.4 MB",
        upload_date: "2024-01-20"
      }
    ];
    
    // Φόρτωση αρχείων από backend ή fallback σε sample data
    async function loadPDFs() {
      try {
        // Προσπάθεια φόρτωσης από backend API
        const response = await fetch('/api/vaseis-scholon');
        if (response.ok) {
          const data = await response.json();
          allPDFs = data;
        } else {
          // Fallback σε sample data
          allPDFs = samplePDFs;
        }
      } catch (error) {
        console.log('Backend not available, using sample data');
        allPDFs = samplePDFs;
      }
      
      displayPDFs(allPDFs);
      updateFilesInfo(allPDFs.length);
    }
    
    // Εμφάνιση PDF αρχείων
    function displayPDFs(pdfs) {
      const container = document.getElementById('pdf-container');
      const noFilesMessage = document.getElementById('no-files-message');
      
      if (pdfs.length === 0) {
        container.style.display = 'none';
        noFilesMessage.style.display = 'block';
        return;
      }
      
      container.style.display = 'grid';
      noFilesMessage.style.display = 'none';
      
      container.innerHTML = pdfs.map(pdf => `
        <div class="pdf-item">
          <div class="pdf-header">
            <svg class="pdf-icon" fill="currentColor" viewBox="0 0 24 24">
              <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
            </svg>
            <h3 class="pdf-title">${pdf.title}</h3>
          </div>
          
          <div class="pdf-info">
            <div class="pdf-meta">
              <span><strong>Έτος:</strong> ${pdf.year}</span>
              <span><strong>Λύκειο:</strong> ${pdf.lykeio}</span>
            </div>
            <div class="pdf-meta">
              <span><strong>Πεδίο:</strong> ${pdf.field}</span>
              <span><strong>Μέγεθος:</strong> ${pdf.file_size}</span>
            </div>
            <div class="pdf-description">
              ${pdf.description || 'Πληροφορίες βάσεων σχολών'}
            </div>
          </div>
          
          <div class="pdf-actions">
            <a href="/api/vaseis-scholon/${pdf.id}/view" target="_blank" class="btn-view"                  
                  onmouseover="this.style.background='#F7C19C'; this.style.color='#BC5E29'; this.style.boxShadow='0 0 0 2px rgba(183, 54, 22, 0.495)'"
                  onmouseout="this.style.background='#4d2c1e'; this.style.color='#fff'; this.style.boxShadow='none'"
                  style="background: #4d2c1e;
                    color: #fff;
                    border: none;
                    border-radius: 20px;
                    padding: 0.5rem 1.5rem;
                    font-weight: 700;
                    font-size:small;
                    cursor: pointer;
                    transition: all 0.2s;">Προβολή
            </a>
            <a href="/api/vaseis-scholon/${pdf.id}/download" download class="btn-download"
            onmouseover="this.style.background='#FFC653'; this.style.color='#CF5E02'; this.style.boxShadow='0 0 0 2px rgba(183, 54, 22, 0.495)'"
                  onmouseout="this.style.background='#F86511'; this.style.color='#fff'; this.style.boxShadow='none'"
                  style="background: #F86511;
                    color: #fff;
                    border: none;
                    border-radius: 20px;
                    padding: 0.5rem 1.5rem;
                    font-weight: 700;
                    font-size:small;
                    cursor: pointer;
                    transition: all 0.2s;">Λήψη
            </a>
          </div>
        </div>
      `).join('');
    }
    
    // Ενημέρωση πληροφοριών αρχείων
    function updateFilesInfo(count) {
      const filesInfo = document.getElementById('files-info');
      const filesCountText = document.getElementById('files-count-text');
      
      if (count > 0) {
        filesInfo.style.display = 'block';
        filesCountText.textContent = `Βρέθηκαν ${count} αρχεία βάσεων σχολών`;
      } else {
        filesInfo.style.display = 'none';
      }
    }
    
    // Φιλτράρισμα αρχείων
    function filterPDFs() {
      // Χρησιμοποιούμε τα φίλτρα από το αντικείμενο currentFilters
      const yearFilter = currentFilters.year;
      const lykeioFilter = currentFilters.lykeio;
      const fieldFilter = currentFilters.field;

      let filteredPDFs = allPDFs.filter(pdf => {
        const matchesYear = !yearFilter || pdf.year === yearFilter;
        const matchesLykeio = !lykeioFilter || pdf.lykeio === lykeioFilter;
        const matchesField = !fieldFilter || pdf.field === fieldFilter;
        return matchesYear && matchesLykeio && matchesField;
      });
      
      displayPDFs(filteredPDFs);
      updateFilesInfo(filteredPDFs.length);
    }
    
    // Καθαρισμός φίλτρων
    function clearFilters() {
      document.getElementById('year-filter').value = '';
      document.getElementById('lykeio-filter').value = '';
      document.getElementById('field-filter').value = '';
      
      displayPDFs(allPDFs);
      updateFilesInfo(allPDFs.length);
    }
    
    // Event listeners
    document.getElementById('year-filter').addEventListener('change', filterPDFs);
    document.getElementById('lykeio-filter').addEventListener('change', filterPDFs);
    document.getElementById('field-filter').addEventListener('change', filterPDFs);
    document.getElementById('clear-filters').addEventListener('click', clearFilters);
    
    // Φόρτωση αρχείων κατά την εκκίνηση
    document.addEventListener('DOMContentLoaded', function() {
      loadPDFs();
    });
    
    // Επιλογή φίλτρων από dropdown
    document.querySelectorAll('.filter-button').forEach(button => {
      button.addEventListener('click', function() {
        const options = this.nextElementSibling;
        const isActive = this.classList.toggle('active');
        
        // Εμφάνιση ή απόκρυψη επιλογών
        options.classList.toggle('show', isActive);
        
        // Κλείσιμο άλλων dropdowns
        if (isActive) {
          document.querySelectorAll('.filter-dropdown').forEach(dropdown => {
            if (dropdown !== this.parentElement) {
              dropdown.querySelector('.filter-button').classList.remove('active');
              dropdown.querySelector('.filter-options').classList.remove('show');
            }
          });
        }
      });
    });
    
    // Επιλογή φίλτρου
    document.querySelectorAll('.filter-option').forEach(option => {
      option.addEventListener('click', function() {
        const value = this.getAttribute('data-value');
        const group = this.closest('.filter-dropdown');
        
        // Ενημέρωση επιλεγμένου φίλτρου
        group.querySelector('.filter-button').textContent = this.textContent;
        group.querySelector('.filter-option.selected')?.classList.remove('selected');
        this.classList.add('selected');
        
        // Φιλτράρισμα αρχείων
        if (group.querySelector('.filter-button').id === 'lykeio-btn') {
          const lykeioValue = value;
          const yearValue = document.getElementById('year-options').querySelector('.filter-option.selected')?.getAttribute('data-value') || '';
          const fieldValue = document.getElementById('field-options').querySelector('.filter-option.selected')?.getAttribute('data-value') || '';
          
          let filteredPDFs = allPDFs.filter(pdf => {
            const matchesYear = !yearValue || pdf.year === yearValue;
            const matchesLykeio = !lykeioValue || pdf.lykeio === lykeioValue;
            const matchesField = !fieldValue || pdf.field === fieldValue;
            
            return matchesYear && matchesLykeio && matchesField;
          });
          
          displayPDFs(filteredPDFs);
          updateFilesInfo(filteredPDFs.length);
        }
      });
    });
  </script>
</body>
</html>
