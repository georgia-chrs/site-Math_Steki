<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Παλιά Θέματα - Μαθητικό Στέκι</title>
  <link rel="stylesheet" href="../style.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;400&display=swap" rel="stylesheet">
  <style>
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .main-content {
      display: flex;
      gap: 30px;
      margin-top: 20px;
    }
    
    .filters-sidebar {
      flex: 0 0 250px;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    
    .filter-dropdown {
      position: relative;
    }
    
    .filter-button {
      width: 100%;
      background: #f08955;
      border: 2px solid transparent;
      border-radius: 15px;
      padding: 8px 40px 8px 16px;
      font-size: 16px;
      font-weight: 500;
      color: #eaeaea;
      text-align: left;
      cursor: pointer;
      transition: all 0.2s ease;
      position: relative;
    }
    
    .filter-button:hover {
      background: #cf5b20;
      border-color: #ffffff;
    }
    
    .filter-button.active {
      background: #cf5b20;
      border-color: #ffffff;
    }
    
    .filter-button::after {
      content: '▼';
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 12px;
      transition: transform 0.2s ease;
    }
    
    .filter-button.active::after {
      transform: translateY(-50%) rotate(180deg);
    }
    
    .filter-options {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: white;
      border: 1px solid #ffb8a1;
      border-top: none;
      border-radius: 0 0 8px 8px;
      max-height: 200px;
      overflow-y: auto;
      z-index: 1000;
      display: none;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    .filter-options.show {
      display: block;
    }
    
    .filter-option {
      padding: 10px 16px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      border-bottom: 1px solid #faf9f8;
    }
    
    .filter-option:hover {
      background: #ffcaa7;
    }
    
    .filter-option:last-child {
      border-bottom: none;
    }
    
    .filter-option.selected {
      background: #fdf0e3;
      color: #d25a19;
      font-weight: 500;
    }
    
    .content-area {
      flex: 1;
    }
    
    .clear-filters-btn {
      background: #461e00;
      color: white;
      border: none;
      padding: 12px 16px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: background-color 0.2s ease;
      margin-top: 10px;
    }
    
    .clear-filters-btn:hover {
      background: #d86710;
    }
    
    .pdf-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .pdf-item {
      background: white;
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      transition: transform 0.2s;
    }
    
    .pdf-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    }
    
    .pdf-header {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .pdf-icon {
      width: 40px;
      height: 40px;
      margin-right: 15px;
      color: #d32f2f;
    }
    
    .pdf-title {
      font-weight: bold;
      font-size: 16px;
      color: #5b3c2a;
      margin: 0;
    }
    
    .pdf-info {
      margin-bottom: 15px;
    }
    
    .pdf-meta {
      display: flex;
      justify-content: space-between;
      font-size: 14px;
      color: #666;
      margin-bottom: 5px;
    }
    
    .pdf-description {
      font-size: 14px;
      color: #666;
      line-height: 1.4;
    }
    
    .pdf-actions {
      display: flex;
      gap: 10px;
    }
    
    .btn-view {
      flex: 1;
      background: #28a745;
      color: white;
      border: none;
      padding: 10px;
      border-radius: 5px;
      cursor: pointer;
      text-decoration: none;
      text-align: center;
      font-size: 14px;
    }
    
    .btn-view:hover {
      background: #218838;
    }
    
    .btn-download {
      flex: 1;
      background: #007bff;
      color: white;
      border: none;
      padding: 10px;
      border-radius: 5px;
      cursor: pointer;
      text-decoration: none;
      text-align: center;
      font-size: 14px;
    }
    
    .btn-download:hover {
      background: #0056b3;
    }
    
    .loading {
      text-align: center;
      padding: 40px;
      color: #666;
      font-size: 18px;
    }
    
    .no-files {
      text-align: center;
      padding: 40px;
      color: #666;
    }
    
    .no-files h3 {
      margin-bottom: 10px;
    }
    
    .pdf-badge {
      display: inline-block;
      background: #5b3c2a;
      color: white;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 12px;
      margin-left: 10px;
    }
    
    .admin-notice {
      background: #fff3cd;
      border: 1px solid #ffeeba;
      color: #856404;
      padding: 15px;
      border-radius: 5px;
      margin-bottom: 20px;
    }
    
    .admin-notice a {
      color: #5b3c2a;
      font-weight: bold;
    }
    
    @media (max-width: 768px) {
      .main-content {
        flex-direction: column;
      }
      
      .filters-sidebar {
        flex: none;
        width: 100%;
      }
      
      .filter-dropdown {
        margin-bottom: 10px;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="topbar">
      <div class="logo"><img src="../logo/b.png" alt="logo"></div>
      <nav>
        <a href="#" style="color: #960e0e;">Αρχική Σελίδα</a>
        <div class="dropdown">
          <a href="main-page/programs.html">Πρόγραμμα Σπουδών</a>
          <div class="dropdown-content">
            <a href="main-page/programs.html">Πλήρες Πρόγραμμα</a>
            <a href="#">Μαθήματα ΓΕΛ</a>
            <a href="#">Μαθήματα ΕΠΑΛ</a>
            <a href="#">Ιδιαίτερα Μαθήματα</a>
          </div>
        </div>

        <div class="dropdown">
          <a href="main-page/panelladikes.html">Πανελλαδικές Εξετάσεις</a>
          <div class="dropdown-content">
            <a href="#">Όλα τα παρακάτω</a>
            <a href="moria-calculator.html">Υπολογισμός Μορίων</a>
            <a href="main-page/pallia-themata.html">Παλιά Θέματα</a>
            <a href="#">Τράπεζα Θεμάτων</a>
            <a href="admin-vaseis-scholon.html">Βάσεις Σχολών</a>
            <a href="#">Μηχανογραφικό</a>
          </div>
        </div>
        <a href="main-page/photos.html">Φωτογραφίες</a>
        <a href="#">Σχετικά με εμάς</a>
      </nav>
      <div class="icons">
        <a href="#"><img src="\elements\Group 17.svg" alt="fb" class="facebook-icon"></a>
        <a href="#"><img src="\elements\mdi_instagram.svg" alt="insta" class="instagram-icon"></a>
        <a href="#"><img src="\elements\phone.svg" alt="phone"></a>
        <a href="#"><img src="\elements\mail.svg" alt="mail"></a>
      </div>
      <a href="index2.html" class="login-btn" style="text-decoration: none;">Είσοδος</a>
    </div>
  </header>
  
  <main>
    <div class="container">
      <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 18px; justify-content: flex-start;">
          <a href="panelladikes.html" title="Πίσω στις Πανελλαδικές Εξετάσεις" style="display: flex; align-items: center; text-decoration: none; color: #333; font-weight: 500; font-size: 1.1em;">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 4px;">
              <path d="M15 6L9 12L15 18" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Πανελλαδικές Εξετάσεις
          </a>
        </div>
      <h1 style="justify-self: center;">Παλιά Θέματα Πανελλαδικών</h1>
      
      <div class="main-content">
        <!-- Φίλτρα στο αριστερό sidebar -->
        <div class="filters-sidebar">
          <div class="filter-dropdown">
            <button class="filter-button" id="lykeio-btn">Λύκειο</button>
            <div class="filter-options" id="lykeio-options">
              <div class="filter-option" data-value="">Όλα τα Λύκεια</div>
              <div class="filter-option" data-value="ΓΕΛ">ΓΕΛ (Γενικό Λύκειο)</div>
              <div class="filter-option" data-value="ΕΠΑΛ">ΕΠΑΛ (Επαγγελματικό Λύκειο)</div>
            </div>
          </div>
          
          <div class="filter-dropdown">
            <button class="filter-button" id="year-btn">Έτος</button>
            <div class="filter-options" id="year-options">
              <div class="filter-option" data-value="">Όλα τα έτη</div>
              <div class="filter-option" data-value="2024">2024</div>
              <div class="filter-option" data-value="2023">2023</div>
              <div class="filter-option" data-value="2022">2022</div>
              <div class="filter-option" data-value="2021">2021</div>
              <div class="filter-option" data-value="2020">2020</div>
            </div>
          </div>
          
          <div class="filter-dropdown">
            <button class="filter-button" id="subject-btn">Μάθημα</button>
            <div class="filter-options" id="subject-options">
              <div class="filter-option" data-value="">Όλα τα μαθήματα</div>
              <!-- Τα μαθήματα θα ενημερώνονται δυναμικά -->
            </div>
          </div>
          
          <div class="filter-dropdown">
            <button class="filter-button" id="date-btn">Ημερομηνία</button>
            <div class="filter-options" id="date-options">
              <div class="filter-option" data-value="">Όλες οι ημερομηνίες</div>
              <div class="filter-option" data-value="recent">Πρόσφατα</div>
              <div class="filter-option" data-value="older">Παλαιότερα</div>
            </div>
          </div>
          
          <button id="clear-filters" class="clear-filters-btn"               
                 onmouseover="this.style.background='#F7C19C'; this.style.color='#BC5E29'; this.style.boxShadow='0 0 0 2px rgba(183, 54, 22, 0.495)'"
                  onmouseout="this.style.background='#4d2c1e'; this.style.color='#fff'; this.style.boxShadow='none'"
                  style="background: #4d2c1e;
                    color: #fff;
                    border: none;
                    border-radius: 20px;
                    padding: 0.5rem 1.5rem;
                    font-weight: 700;
                    font-size:small;
                    cursor: pointer;
                    transition: all 0.2s;">Καθαρισμός Φίλτρων</button>
        </div>

        <!-- Περιεχόμενο στα δεξιά -->
        <div class="content-area">
          <!-- Πληροφορίες αρχείων -->
          <div id="files-info" class="admin-notice" style="display: none;">
            <strong>Πληροφορίες:</strong> 
            <span id="files-count-text"></span>
          </div>

          <!-- Περιοχή PDF αρχείων -->
          <div id="pdf-container" class="pdf-grid">
            <!-- Τα PDF θα φορτωθούν δυναμικά από JavaScript -->
            <div class="loading">Φόρτωση παλιών θεμάτων...</div>
          </div>

          <!-- Μήνυμα όταν δεν υπάρχουν αρχεία -->
          <div id="no-files-message" class="no-files" style="display: none;">
            <h3>Δεν υπάρχουν διαθέσιμα αρχεία</h3>
            <p>Δεν βρέθηκαν παλιά θέματα που να ταιριάζουν με τα κριτήρια αναζήτησης.</p>
          </div>
        </div>
      </div>
    </div>
   <footer>
    <div class="footer-content" style="display: flex; flex-direction: row; justify-content: space-between; align-items: flex-start;  width: 100%; max-width: 100vw; box-sizing: border-box;">
      <div class="hero-logo" style="margin-bottom: 1rem; margin-top: -20px;">
        <img src="../logo/b-l.png" alt="Μαθητικό Στέκι" style="max-width: 320px; width: 100%; height: auto; filter: brightness(0) invert(1); ">
      </div>
      <div class="footer-links"  data-id="footer-links" style="display: flex; flex-direction: column; align-items: center; gap: 0.3em; text-align: center; justify-content: center; margin-top: 40px;">
        <span>Επικοινωνία</span>
        <span>τηλέφωνο επικοινωνίας: 2101553200236</span>
         <span>e-mail: info@mathsteki.gr</span>
         <span>Facebook: info@mathsteki.gr</span>
         <span>Instagram: info@mathsteki.gr</span>
      </div>
      <div class="footer-map" >
        <!-- Ενσωματωμένος χάρτης Google Maps με marker στη διεύθυνση Κρόνου 14, Κορυδαλλός 181 22 -->
        <iframe
          src="https://www.google.com/maps?q=Κρόνου+14,+Κορυδαλλός+181+22&output=embed"
          width="290"
          height="140"
          style="border:10px solid #ffffff; border-radius: 10px;"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
          title="Χάρτης διεύθυνσης φροντιστηρίου"
        ></iframe>
      </div>
    </div>
    <div class="footer-bottom" style="margin-top: 30px;  text-align: center; font-size: 0.9em; color: #ccc;">
      &copy; 2025 Μαθητικό Στέκι
    </div>
  </footer>
  <script src="../main.js"></script>
  <script src="../client-text.js"></script>
  <script>
    // Μεταβλητές για τα φίλτρα
    let currentFilters = {
      lykeio: '',
      year: '',
      subject: '',
      date: ''
    };
    
    // Dropdown functionality
    document.addEventListener('DOMContentLoaded', function() {
      initializeDropdowns();
      loadPDFs();
    });
    
    function initializeDropdowns() {
      // Διαχείριση όλων των dropdown buttons
      const dropdownButtons = document.querySelectorAll('.filter-button');
      
      dropdownButtons.forEach(button => {
        button.addEventListener('click', function(e) {
          e.stopPropagation();
          const dropdownId = this.id.replace('-btn', '-options');
          const dropdown = document.getElementById(dropdownId);
          const isOpen = dropdown.classList.contains('show');
          
          // Κλείσιμο όλων των άλλων dropdowns
          document.querySelectorAll('.filter-options').forEach(opt => {
            opt.classList.remove('show');
          });
          document.querySelectorAll('.filter-button').forEach(btn => {
            btn.classList.remove('active');
          });
          
          // Toggle του τρέχοντος dropdown
          if (!isOpen) {
            dropdown.classList.add('show');
            this.classList.add('active');
          }
        });
      });
      
      // Χρήση event delegation για τις επιλογές (δουλεύει και με δυναμικό περιεχόμενο)
      document.addEventListener('click', function(e) {
        if (e.target.classList.contains('filter-option')) {
          handleFilterOptionClick(e.target);
        }
      });
      
      // Κλείσιμο dropdowns όταν κάνουμε click έξω
      document.addEventListener('click', function(e) {
        if (!e.target.closest('.filter-dropdown')) {
          document.querySelectorAll('.filter-options').forEach(opt => {
            opt.classList.remove('show');
          });
          document.querySelectorAll('.filter-button').forEach(btn => {
            btn.classList.remove('active');
          });
        }
      });
      
      // Clear filters button
      document.getElementById('clear-filters').addEventListener('click', function() {
        clearAllFilters();
      });
    }
    
    function handleFilterOptionClick(option) {
      const dropdown = option.parentElement;
      const dropdownId = dropdown.id;
      const buttonId = dropdownId.replace('-options', '-btn');
      const button = document.getElementById(buttonId);
      const value = option.dataset.value;
      const text = option.textContent;
      
      // Ενημέρωση του button text (εκτός από το "Όλα τα μαθήματα")
      if (value === '' && dropdownId === 'subject-options') {
        button.textContent = 'Μάθημα';
      } else if (value === '' && dropdownId === 'lykeio-options') {
        button.textContent = 'Λύκειο';
      } else if (value === '' && dropdownId === 'year-options') {
        button.textContent = 'Έτος';
      } else if (value === '' && dropdownId === 'date-options') {
        button.textContent = 'Ημερομηνία';
      } else {
        button.textContent = text;
      }
      
      // Ενημέρωση των φίλτρων
      const filterType = dropdownId.replace('-options', '');
      currentFilters[filterType] = value;
      
      // Εφαρμογή φίλτρων
      applyFilters();
      
      // Κλείσιμο dropdown
      dropdown.classList.remove('show');
      button.classList.remove('active');
      
      // Ενημέρωση selected state
      dropdown.querySelectorAll('.filter-option').forEach(opt => {
        opt.classList.remove('selected');
      });
      option.classList.add('selected');
      
      // Ενημέρωση μαθημάτων όταν αλλάζει το λύκειο
      if (filterType === 'lykeio') {
        updateSubjectOptions(value);
      }
    }
    
    function updateSubjectOptions(lykeioType) {
      const subjectOptions = document.getElementById('subject-options');
      const subjectButton = document.getElementById('subject-btn');
      
      // Καθαρισμός υπαρχόντων επιλογών
      subjectOptions.innerHTML = '<div class="filter-option selected" data-value="">Όλα τα μαθήματα</div>';
      
      // Προσθήκη μαθημάτων ανάλογα με τον τύπο λυκείου
      if (lykeioType && subjectsByLykeio[lykeioType]) {
        subjectsByLykeio[lykeioType].forEach(subject => {
          const option = document.createElement('div');
          option.className = 'filter-option';
          option.dataset.value = subject;
          option.textContent = subject;
          subjectOptions.appendChild(option);
        });
      }
      
      // Reset subject filter και button text
      currentFilters.subject = '';
      subjectButton.textContent = 'Μάθημα';
    }
    
    function clearAllFilters() {
      // Reset όλων των φίλτρων
      currentFilters = {
        lykeio: '',
        year: '',
        subject: '',
        date: ''
      };
      
      // Reset button texts
      document.getElementById('lykeio-btn').textContent = 'Λύκειο';
      document.getElementById('year-btn').textContent = 'Έτος';
      document.getElementById('subject-btn').textContent = 'Μάθημα';
      document.getElementById('date-btn').textContent = 'Ημερομηνία';
      
      // Reset selected states
      document.querySelectorAll('.filter-option').forEach(opt => {
        opt.classList.remove('selected');
      });
      document.querySelectorAll('.filter-option[data-value=""]').forEach(opt => {
        opt.classList.add('selected');
      });
      
      // Reset subject options
      updateSubjectOptions('');
      
      // Εφαρμογή φίλτρων (δηλαδή εμφάνιση όλων)
      applyFilters();
    }
    
    function applyFilters() {
      console.log('Applying filters:', currentFilters);
      
      const filteredPDFs = allPDFs.filter(pdf => {
        const matchesLykeio = !currentFilters.lykeio || pdf.lykeio === currentFilters.lykeio;
        const matchesYear = !currentFilters.year || pdf.year === currentFilters.year;
        const matchesSubject = !currentFilters.subject || pdf.subject === currentFilters.subject;
        
        return matchesLykeio && matchesYear && matchesSubject;
      });
      
      console.log(`Filtered ${filteredPDFs.length} PDFs from ${allPDFs.length} total`);
      displayPDFs(filteredPDFs);
      updateFilesInfo(filteredPDFs.length);
    }
    
    function updateFilesInfo(count) {
      const infoDiv = document.getElementById('files-info');
      const countText = document.getElementById('files-count-text');
      
      if (count > 0) {
        countText.textContent = `Βρέθηκαν ${count} αρχεία`;
        infoDiv.style.display = 'block';
      } else {
        infoDiv.style.display = 'none';
      }
    }

    // Δυναμική φόρτωση PDF αρχείων
    let allPDFs = [];
    
    // Μαθήματα ανά τύπο λυκείου
    const subjectsByLykeio = {
      'ΓΕΛ': [
        'Μαθηματικά Προσανατολισμού',
        'Μαθηματικά Γενικής Παιδείας',
        'Φυσική Προσανατολισμού',
        'Χημεία Προσανατολισμού',
        'Βιολογία Προσανατολισμού',
        'Νεοελληνική Γλώσσα και Λογοτεχνία',
        'Αρχαία Ελληνική Γλώσσα και Γραμματεία',
        'Ιστορία Γενικής Παιδείας',
        'Ιστορία Προσανατολισμού',
        'Λατινικά',
        'Άλγεβρα',
        'Γεωμετρία',
        'Εικαστικά',
        'Μουσική',
        'Κοινωνιολογία',
        'Οικονομία',
        'Ψυχολογία',
        'Φιλοσοφία',
        'Πολιτική Παιδεία',
        'Πληροφορική',
        'Γεωγραφία',
        'Αγγλικά',
        'Γαλλικά',
        'Γερμανικά',
        'Ιταλικά',
        'Ισπανικά',
        'Ρωσικά'
      ],
      'ΕΠΑΛ': [
        'Μαθηματικά και Στοιχεία Στατιστικής',
        'Νεοελληνική Γλώσσα και Λογοτεχνία',
        'Ιστορία',
        'Φυσικές Επιστήμες',
        'Αγγλικά',
        'Οικονομία',
        'Πληροφορική',
        'Αρχές Οικονομικής Θεωρίας',
        'Αρχές Οργάνωσης και Διοίκησης Επιχειρήσεων',
        'Στοιχεία Ηλεκτρολογίας',
        'Στοιχεία Μηχανολογίας',
        'Αρχές Μηχανικής - Αντοχή Υλικών',
        'Τεχνολογία Επικοινωνιών',
        'Προγραμματισμός Υπολογιστών',
        'Ανάπτυξη Εφαρμογών σε Προγραμματιστικό Περιβάλλον',
        'Δίκτυα Υπολογιστών',
        'Σχεδίαση και Ανάπτυξη Ψηφιακών Εφαρμογών',
        'Συστήματα Διαχείρισης Βάσεων Δεδομένων',
        'Τουρισμός - Γεωγραφία Τουρισμού',
        'Τουριστικές Επιχειρήσεις και Επαγγέλματα',
        'Διοίκηση Τουριστικών Επιχειρήσεων',
        'Τουριστικό Μάρκετινγκ',
        'Ιστορία Τέχνης',
        'Εικαστικά',
        'Μουσική',
        'Θεατρικό Εργαστήριο',
        'Χορός',
        'Σχέδιο',
        'Τεχνολογία Υφασμάτων',
        'Τεχνολογία Τροφίμων',
        'Περιβάλλον και Φυσικοί Πόροι',
        'Γεωπονία - Κτηνοτροφία',
        'Φυτική Παραγωγή',
        'Ζωική Παραγωγή',
        'Αρχιτεκτονικό Σχέδιο',
        'Στοιχεία Αρχιτεκτονικής',
        'Τοπογραφία',
        'Οικοδομική',
        'Υδραυλικά - Υγειονομικά',
        'Ηλεκτρικές Εγκαταστάσεις',
        'Στοιχεία Ιατρικής',
        'Στοιχεία Νοσηλευτικής',
        'Ανατομία - Φυσιολογία',
        'Παθολογία',
        'Φαρμακολογία',
        'Διατροφή - Διαιτολογία',
        'Ψυχολογία - Κοινωνιολογία',
        'Εργοθεραπεία - Φυσιοθεραπεία'
      ]
    };
    
    // Φόρτωση PDF αρχείων από το API
    async function loadPDFs() {
      try {
        const response = await fetch('/api/pallia-themata');
        if (response.ok) {
          allPDFs = await response.json();
        } else {
          console.warn('Σφάλμα φόρτωσης από API, χρήση δείγματος');
          allPDFs = getSamplePDFs();
        }
        displayPDFs(allPDFs);
      } catch (error) {
        console.error('Σφάλμα φόρτωσης PDFs:', error);
        allPDFs = getSamplePDFs();
        displayPDFs(allPDFs);
      }
    }
    
    // Δείγμα δεδομένων (μόνο θέματα)
    function getSamplePDFs() {
      return [
        {
          id: 1,
          title: "Μαθηματικά Προσανατολισμού 2024",
          subject: "Μαθηματικά",
          year: "2024",
          type: "Θέματα",
          lykeio: "ΓΕΛ",
          filename: "mathimatika_2024_themata.pdf",
          description: "Θέματα Μαθηματικών Προσανατολισμού Πανελλαδικών Εξετάσεων 2024",
          uploadDate: "2024-07-15",
          fileSize: "2.3 MB"
        },
        {
          id: 2,
          title: "Φυσική Προσανατολισμού 2024",
          subject: "Φυσική",
          year: "2024",
          type: "Θέματα",
          lykeio: "ΓΕΛ",
          filename: "fysiki_2024_themata.pdf",
          description: "Θέματα Φυσικής Προσανατολισμού Πανελλαδικών Εξετάσεων 2024",
          uploadDate: "2024-07-15",
          fileSize: "1.8 MB"
        },
        {
          id: 3,
          title: "Νεοελληνική Γλώσσα 2024",
          subject: "Νεοελληνική Γλώσσα",
          year: "2024",
          type: "Θέματα",
          lykeio: "ΓΕΛ",
          filename: "neoeliniki_2024_themata.pdf",
          description: "Θέματα Νεοελληνικής Γλώσσας Πανελλαδικών Εξετάσεων 2024",
          uploadDate: "2024-07-15",
          fileSize: "1.5 MB"
        },
        {
          id: 4,
          title: "Μαθηματικά ΕΠΑΛ 2024",
          subject: "Μαθηματικά",
          year: "2024",
          type: "Θέματα",
          lykeio: "ΕΠΑΛ",
          filename: "mathimatika_epal_2024_themata.pdf",
          description: "Θέματα Μαθηματικών ΕΠΑΛ Πανελλαδικών Εξετάσεων 2024",
          uploadDate: "2024-07-15",
          fileSize: "2.0 MB"
        },
        {
          id: 5,
          title: "Οικονομικά ΕΠΑΛ 2024",
          subject: "Οικονομικά",
          year: "2024",
          type: "Θέματα",
          lykeio: "ΕΠΑΛ",
          filename: "oikonomika_epal_2024_themata.pdf",
          description: "Θέματα Οικονομικών ΕΠΑΛ Πανελλαδικών Εξετάσεων 2024",
          uploadDate: "2024-07-15",
          fileSize: "1.7 MB"
        },
        {
          id: 6,
          title: "Μαθηματικά Προσανατολισμού 2023",
          subject: "Μαθηματικά",
          year: "2023",
          type: "Θέματα",
          lykeio: "ΓΕΛ",
          filename: "mathimatika_2023_themata.pdf",
          description: "Θέματα Μαθηματικών Προσανατολισμού Πανελλαδικών Εξετάσεων 2023",
          uploadDate: "2023-07-15",
          fileSize: "2.1 MB"
        }
      ];
    }
    
    // Ενημέρωση μαθημάτων βάσει τύπου λυκείου
    function updateSubjects() {
      const lykeioFilter = document.getElementById('lykeio-filter').value;
      const subjectFilter = document.getElementById('subject-filter');
      
      // Καθαρισμός υπαρχουσών επιλογών
      subjectFilter.innerHTML = '<option value="">Όλα τα μαθήματα</option>';
      
      let subjects = [];
      if (lykeioFilter) {
        subjects = subjectsByLykeio[lykeioFilter] || [];
      } else {
        // Αν δεν έχει επιλεγεί λύκειο, εμφάνισε όλα τα μαθήματα
        subjects = [...new Set([...subjectsByLykeio['ΓΕΛ'], ...subjectsByLykeio['ΕΠΑΛ']])].sort();
      }
      
      subjects.forEach(subject => {
        const option = document.createElement('option');
        option.value = subject;
        option.textContent = subject;
        subjectFilter.appendChild(option);
      });
    }
    
    // Εμφάνιση PDF αρχείων
    function displayPDFs(pdfs) {
      const container = document.getElementById('pdf-container');
      const noFilesMessage = document.getElementById('no-files-message');
      const filesInfo = document.getElementById('files-info');
      const filesCountText = document.getElementById('files-count-text');
      
      // Ενημέρωση πληροφοριών αρχείων
      if (pdfs.length > 0) {
        let infoText = `Συνολικά ${pdfs.length} αρχείο/α διαθέσιμο/α από τη βάση δεδομένων`;
        filesCountText.textContent = infoText;
        filesInfo.style.display = 'block';
      } else {
        filesInfo.style.display = 'none';
      }
      
      if (pdfs.length === 0) {
        container.innerHTML = '';
        noFilesMessage.style.display = 'block';
        return;
      }
      
      noFilesMessage.style.display = 'none';
      
      container.innerHTML = pdfs.map(pdf => `
        <div class="pdf-item" data-year="${pdf.year}" data-subject="${pdf.subject}" data-lykeio="${pdf.lykeio || 'ΓΕΛ'}">
          <div class="pdf-header">
            <svg class="pdf-icon" viewBox="0 0 24 24" fill="currentColor">
              <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z" />
            </svg>
            <div>
              <h3 class="pdf-title">${pdf.title}</h3>
              <span class="pdf-badge">${pdf.lykeio || 'ΓΕΛ'}</span>
            </div>
          </div>
          
          <div class="pdf-info">
            <div class="pdf-meta">
              <span><strong>Μάθημα:</strong> ${pdf.subject}</span>
              <span><strong>Έτος:</strong> ${pdf.year}</span>
            </div>
            <div class="pdf-meta">
              <span><strong>Λύκειο:</strong> ${pdf.lykeio || 'ΓΕΛ'}</span>
              <span><strong>Μέγεθος:</strong> ${pdf.file_size || pdf.fileSize}</span>
            </div>
            <div class="pdf-meta">
              <span><strong>Ημερομηνία:</strong> ${formatDate(pdf.upload_date || pdf.uploadDate)}</span>
            </div>
            <p class="pdf-description">${pdf.description}</p>
          </div>
          
          <div class="pdf-actions">
            <a href="javascript:void(0)" onclick="viewPDF('${pdf.filename}')" class="btn-view" 
                  onmouseover="this.style.background='#F7C19C'; this.style.color='#BC5E29'; this.style.boxShadow='0 0 0 2px rgba(183, 54, 22, 0.495)'"
                  onmouseout="this.style.background='#4d2c1e'; this.style.color='#fff'; this.style.boxShadow='none'"
                  style="background: #4d2c1e;
                    color: #fff;
                    border: none;
                    border-radius: 20px;
                    padding: 0.5rem 1.5rem;
                    font-weight: 700;
                    font-size:small;
                    cursor: pointer;
                    transition: all 0.2s;">
              Προβολή
            </a>
            <a href="javascript:void(0)" onclick="downloadPDF('${pdf.filename}', '${pdf.title}')" class="btn-download" 
                   onmouseover="this.style.background='#FFC76C'; this.style.color='#C95A1F'; this.style.boxShadow='0 0 0 2px rgba(183, 54, 22, 0.495)'"
                  onmouseout="this.style.background='#ff7c4ce0'; this.style.color='#fff'; this.style.boxShadow='none'"
                  style="background: #ff7c4ce0;
                    color: #fff;
                    border: none;
                    border-radius: 20px;
                    padding: 0.5rem 1.5rem;
                    font-weight: 700;
                    font-size:small;
                    cursor: pointer;
                    transition: all 0.2s;">
               Λήψη
            </a>
          </div>
        </div>
      `).join('');
    }
    
    // Μορφοποίηση ημερομηνίας
    function formatDate(dateString) {
      const date = new Date(dateString);
      return date.toLocaleDateString('el-GR');
    }
    
    // Προβολή PDF
    function viewPDF(filename) {
      // Αναζήτηση του PDF στη λίστα για να πάρουμε το ID
      const pdf = allPDFs.find(p => p.filename === filename);
      
      if (pdf) {
        // Άνοιγμα του PDF μέσω API για προβολή
        const pdfUrl = `/api/pallia-themata/${pdf.id}/view`;
        window.open(pdfUrl, '_blank');
      } else {
        alert('Το αρχείο δεν βρέθηκε');
      }
    }
    
    // Λήψη PDF
    function downloadPDF(filename, title) {
      // Αναζήτηση του PDF στη λίστα για να πάρουμε το ID
      const pdf = allPDFs.find(p => p.filename === filename);
      
      if (pdf) {
        // Λήψη του PDF μέσω API για download
        const pdfUrl = `/api/pallia-themata/${pdf.id}/download`;
        const link = document.createElement('a');
        link.href = pdfUrl;
        link.download = filename;
        link.style.display = 'none';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      } else {
        alert('Το αρχείο δεν βρέθηκε');
      }
    }
    
    // Φιλτράρισμα αρχείων
    function filterPDFs() {
      const lykeioFilter = document.getElementById('lykeio-filter').value;
      const yearFilter = document.getElementById('year-filter').value;
      const subjectFilter = document.getElementById('subject-filter').value;
      
      const filteredPDFs = allPDFs.filter(pdf => {
        const lykeioMatch = !lykeioFilter || (pdf.lykeio || 'ΓΕΛ') === lykeioFilter;
        const yearMatch = !yearFilter || pdf.year === yearFilter;
        const subjectMatch = !subjectFilter || pdf.subject === subjectFilter;
        
        return lykeioMatch && yearMatch && subjectMatch;
      });
      
      displayPDFs(filteredPDFs);
    }
    
    // Καθαρισμός φίλτρων
    function clearFilters() {
      document.getElementById('lykeio-filter').value = '';
      document.getElementById('year-filter').value = '';
      document.getElementById('subject-filter').value = '';
      updateSubjects(); // Επαναφορά όλων των μαθημάτων
      displayPDFs(allPDFs);
    }
    
    // Event listeners
    document.addEventListener('DOMContentLoaded', function() {
      loadPDFs();
      updateSubjects(); // Αρχική φόρτωση μαθημάτων
      
      document.getElementById('lykeio-filter').addEventListener('change', function() {
        updateSubjects();
        filterPDFs();
      });
      document.getElementById('year-filter').addEventListener('change', filterPDFs);
      document.getElementById('subject-filter').addEventListener('change', filterPDFs);
      document.getElementById('clear-filters').addEventListener('click', clearFilters);
    });
  </script>


</body>
</html>
