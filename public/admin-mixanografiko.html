<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· ÎœÎ·Ï‡Î±Î½Î¿Î³ÏÎ±Ï†Î¹ÎºÎ¿Ï - Admin Panel</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    /* Admin Panel Styles */
    .admin-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #f8f9fa;
      min-height: 100vh;
    }

    .admin-header {
      background: #5b3c2a;
      color: white;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 30px;
      text-align: center;
    }

    .admin-header h1 {
      margin: 0 0 10px 0;
      font-size: 28px;
    }

    .admin-header p {
      margin: 0;
      opacity: 0.9;
    }

    .admin-section {
      background: white;
      border-radius: 10px;
      padding: 25px;
      margin-bottom: 30px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .section-title {
      font-size: 22px;
      font-weight: 600;
      color: #5b3c2a;
      margin-bottom: 20px;
      border-bottom: 2px solid #e9ecef;
      padding-bottom: 10px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      color: #333;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 14px;
      box-sizing: border-box;
    }

    .form-group textarea {
      height: 80px;
      resize: vertical;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 20px;
    }

    .file-upload {
      border: 2px dashed #ddd;
      border-radius: 5px;
      padding: 20px;
      text-align: center;
      background: #f8f9fa;
      cursor: pointer;
      transition: border-color 0.3s;
    }

    .file-upload:hover {
      border-color: #5b3c2a;
    }

    .file-upload.dragover {
      border-color: #5b3c2a;
      background: #e8f4f8;
    }

    .file-info {
      margin-top: 10px;
      font-size: 14px;
      color: #666;
    }

    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      margin-right: 10px;
    }

    .btn-primary {
      background: #5b3c2a;
      color: white;
    }

    .btn-primary:hover {
      background: #4a2d1f;
    }

    .btn-secondary {
      background: #6c757d;
      color: white;
    }

    .btn-secondary:hover {
      background: #5a6268;
    }

    .btn-danger {
      background: #dc3545;
      color: white;
    }

    .btn-danger:hover {
      background: #c82333;
    }

    .btn-success {
      background: #28a745;
      color: white;
    }

    .btn-success:hover {
      background: #218838;
    }

    .table-container {
      overflow-x: auto;
    }

    .admin-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    .admin-table th,
    .admin-table td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #dee2e6;
    }

    .admin-table th {
      background: #f8f9fa;
      font-weight: 600;
      color: #5b3c2a;
    }

    .admin-table tr:hover {
      background: #f8f9fa;
    }

    .action-buttons {
      display: flex;
      gap: 2px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .btn-small {
      padding: 4px 8px;
      font-size: 12px;
      min-width: auto;
      white-space: nowrap;
      border-radius: 3px;
    }

    .alert {
      padding: 15px;
      border-radius: 5px;
      margin-bottom: 20px;
    }

    .alert-success {
      background: #d4edda;
      border: 1px solid #c3e6cb;
      color: #155724;
    }

    .alert-error {
      background: #f8d7da;
      border: 1px solid #f5c6cb;
      color: #721c24;
    }

    .loading {
      text-align: center;
      padding: 40px;
      color: #666;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
    }

    .modal-content {
      background: white;
      margin: 50px auto;
      padding: 30px;
      border-radius: 10px;
      width: 90%;
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid #dee2e6;
    }

    .modal-title {
      font-size: 20px;
      font-weight: 600;
      color: #5b3c2a;
    }

    .close {
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      color: #aaa;
    }

    .close:hover {
      color: #000;
    }

    @media (max-width: 768px) {
      .form-row {
        grid-template-columns: 1fr;
      }
      
      .admin-container {
        padding: 10px;
      }
      
      .action-buttons {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="admin-container">
    <div class="admin-header">
      <h1>ğŸ“ Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· ÎœÎ·Ï‡Î±Î½Î¿Î³ÏÎ±Ï†Î¹ÎºÎ¿Ï</h1>
      <p>Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ·, ÎµÏ€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î± ÎºÎ±Î¹ Î´Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· Î±ÏÏ‡ÎµÎ¯Ï‰Î½ Î¼Î·Ï‡Î±Î½Î¿Î³ÏÎ±Ï†Î¹ÎºÎ¿Ï</p>
    </div>

    <!-- Alert Messages -->
    <div id="alert-container"></div>

    <!-- Î¦ÏŒÏÎ¼Î± Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ·Ï‚/Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚ -->
    <div class="admin-section">
      <h2 class="section-title" id="form-title"> Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· ÎÎ­Î¿Ï… Î‘ÏÏ‡ÎµÎ¯Î¿Ï… ÎœÎ·Ï‡Î±Î½Î¿Î³ÏÎ±Ï†Î¹ÎºÎ¿Ï</h2>
      
      <form id="mixanografiko-form">
        <input type="hidden" id="edit-id" value="">
        
        <div class="form-row">
          <div class="form-group">
            <label for="title">Î¤Î¯Ï„Î»Î¿Ï‚ *</label>
            <input type="text" id="title" name="title" required>
          </div>
          
          <div class="form-group">
            <label for="lykeio">Î¤ÏÏ€Î¿Ï‚ Î›Ï…ÎºÎµÎ¯Î¿Ï… *</label>
            <select id="lykeio" name="lykeio" required>
              <option value="">Î•Ï€Î¹Î»Î­Î¾Ï„Îµ...</option>
              <option value="Î“Î•Î›">Î“Î•Î›</option>
              <option value="Î•Î Î‘Î›">Î•Î Î‘Î›</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="field">Î ÎµÎ´Î¯Î¿ Î£Ï€Î¿Ï…Î´ÏÎ½ *</label>
            <select id="field" name="field" required>
              <option value="">Î•Ï€Î¹Î»Î­Î¾Ï„Îµ...</option>
              <option value="Î˜ÎµÏ„Î¹ÎºÎ­Ï‚ Î•Ï€Î¹ÏƒÏ„Î®Î¼ÎµÏ‚">Î˜ÎµÏ„Î¹ÎºÎ­Ï‚ Î•Ï€Î¹ÏƒÏ„Î®Î¼ÎµÏ‚</option>
              <option value="Î‘Î½Î¸ÏÏ‰Ï€Î¹ÏƒÏ„Î¹ÎºÎ­Ï‚ Î•Ï€Î¹ÏƒÏ„Î®Î¼ÎµÏ‚">Î‘Î½Î¸ÏÏ‰Ï€Î¹ÏƒÏ„Î¹ÎºÎ­Ï‚ Î•Ï€Î¹ÏƒÏ„Î®Î¼ÎµÏ‚</option>
              <option value="ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÎ­Ï‚ Î•Ï€Î¹ÏƒÏ„Î®Î¼ÎµÏ‚">ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÎ­Ï‚ Î•Ï€Î¹ÏƒÏ„Î®Î¼ÎµÏ‚</option>
              <option value="ÎšÎ±Î»Î­Ï‚ Î¤Î­Ï‡Î½ÎµÏ‚">ÎšÎ±Î»Î­Ï‚ Î¤Î­Ï‡Î½ÎµÏ‚</option>
              <option value="Î¤ÎµÏ‡Î½Î¿Î»Î¿Î³Î¹ÎºÎ­Ï‚ Î•Ï€Î¹ÏƒÏ„Î®Î¼ÎµÏ‚">Î¤ÎµÏ‡Î½Î¿Î»Î¿Î³Î¹ÎºÎ­Ï‚ Î•Ï€Î¹ÏƒÏ„Î®Î¼ÎµÏ‚</option>
              <option value="Î‘Î¸Î»Î·Ï„Î¹ÏƒÎ¼ÏŒÏ‚">Î‘Î¸Î»Î·Ï„Î¹ÏƒÎ¼ÏŒÏ‚</option>
              <option value="Î¥Î³ÎµÎ¯Î±Ï‚">Î¥Î³ÎµÎ¯Î±Ï‚</option>
              <option value="Î¤Î¿Ï…ÏÎ¹ÏƒÎ¼ÏŒÏ‚">Î¤Î¿Ï…ÏÎ¹ÏƒÎ¼ÏŒÏ‚</option>
            </select>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="specialty">Î•Î¹Î´Î¹ÎºÎ¬ ÎœÎ±Î¸Î®Î¼Î±Ï„Î±/Î•Î¹Î´Î¯ÎºÎµÏ…ÏƒÎ·</label>
            <select id="specialty" name="specialty">
              <option value="">Î•Ï€Î¹Î»Î­Î¾Ï„Îµ...</option>
              <option value="Î•Î¹ÎºÎ±ÏƒÏ„Î¹ÎºÎ¬">Î•Î¹ÎºÎ±ÏƒÏ„Î¹ÎºÎ¬</option>
              <option value="ÎœÎ¿Ï…ÏƒÎ¹ÎºÎ®">ÎœÎ¿Ï…ÏƒÎ¹ÎºÎ®</option>
              <option value="Î¦Ï…ÏƒÎ¹ÎºÎ® Î‘Î³Ï‰Î³Î®">Î¦Ï…ÏƒÎ¹ÎºÎ® Î‘Î³Ï‰Î³Î®</option>
              <option value="Î¤ÎµÏ‡Î½Î¿Î»Î¿Î³Î¹ÎºÎ¬">Î¤ÎµÏ‡Î½Î¿Î»Î¿Î³Î¹ÎºÎ¬</option>
              <option value="Î Î»Î·ÏÎ¿Ï†Î¿ÏÎ¹ÎºÎ®">Î Î»Î·ÏÎ¿Ï†Î¿ÏÎ¹ÎºÎ®</option>
              <option value="Î‘Î¹ÏƒÎ¸Î·Ï„Î¹ÎºÎ®">Î‘Î¹ÏƒÎ¸Î·Ï„Î¹ÎºÎ®</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="filename">ÎŒÎ½Î¿Î¼Î± Î‘ÏÏ‡ÎµÎ¯Î¿Ï… *</label>
            <input type="text" id="filename" name="filename" required 
                   placeholder="Ï€.Ï‡. odigos_mixanografiko_2024.pdf">
          </div>
          
          <div class="form-group">
            <label for="description">Î ÎµÏÎ¹Î³ÏÎ±Ï†Î®</label>
            <textarea id="description" name="description" 
                      placeholder="Î£ÏÎ½Ï„Î¿Î¼Î· Ï€ÎµÏÎ¹Î³ÏÎ±Ï†Î® Ï„Î¿Ï… Î±ÏÏ‡ÎµÎ¯Î¿Ï…..."></textarea>
          </div>
        </div>
        
        <div class="form-group">
          <label>Î‘ÏÏ‡ÎµÎ¯Î¿ PDF *</label>
          <div class="file-upload" id="file-upload">
            <div id="upload-text">
              ğŸ“ ÎšÎ¬Î½Ï„Îµ ÎºÎ»Î¹Îº Î® ÏƒÏÏÎµÏ„Îµ Ï„Î¿ PDF Î±ÏÏ‡ÎµÎ¯Î¿ ÎµÎ´Ï
            </div>
            <input type="file" id="pdf-file" accept=".pdf" style="display: none;">
            <div class="file-info" id="file-info"></div>
          </div>
        </div>
        
        <div style="margin-top: 30px;">
          <button type="submit" class="btn btn-primary" id="submit-btn">
             Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Î‘ÏÏ‡ÎµÎ¯Î¿Ï…
          </button>
          <button type="button" class="btn btn-secondary" onclick="resetForm()">
             ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Î¦ÏŒÏÎ¼Î±Ï‚
          </button>
        </div>
      </form>
    </div>

    <!-- Î›Î¯ÏƒÏ„Î± Î‘ÏÏ‡ÎµÎ¯Ï‰Î½ -->
    <div class="admin-section">
      <h2 class="section-title"> Î¥Ï€Î¬ÏÏ‡Î¿Î½Ï„Î± Î‘ÏÏ‡ÎµÎ¯Î± ÎœÎ·Ï‡Î±Î½Î¿Î³ÏÎ±Ï†Î¹ÎºÎ¿Ï</h2>
      
      <div class="loading" id="loading">
        Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î±ÏÏ‡ÎµÎ¯Ï‰Î½...
      </div>
      
      <div class="table-container" id="table-container" style="display: none;">
        <table class="admin-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Î¤Î¯Ï„Î»Î¿Ï‚</th>
              <th>Î›ÏÎºÎµÎ¹Î¿</th>
              <th>Î ÎµÎ´Î¯Î¿</th>
              <th>Î•Î¹Î´Î¹ÎºÏŒÏ„Î·Ï„Î±</th>
              <th>Î‘ÏÏ‡ÎµÎ¯Î¿</th>
              <th>ÎœÎ­Î³ÎµÎ¸Î¿Ï‚</th>
              <th>Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î±</th>
              <th>Î•Î½Î­ÏÎ³ÎµÎ¹ÎµÏ‚</th>
            </tr>
          </thead>
          <tbody id="files-table-body">
            <!-- Î”Ï…Î½Î±Î¼Î¹ÎºÏŒ Ï€ÎµÏÎ¹ÎµÏ‡ÏŒÎ¼ÎµÎ½Î¿ -->
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Edit Modal -->
  <div id="edit-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <span class="modal-title"> Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î± Î‘ÏÏ‡ÎµÎ¯Î¿Ï…</span>
        <span class="close" onclick="closeEditModal()">&times;</span>
      </div>
      <div id="edit-form-container">
        <!-- Î¤Î¿ Ï€ÎµÏÎ¹ÎµÏ‡ÏŒÎ¼ÎµÎ½Î¿ Î¸Î± Ï†Î¿ÏÏ„Ï‰Î¸ÎµÎ¯ Î´Ï…Î½Î±Î¼Î¹ÎºÎ¬ -->
      </div>
    </div>
  </div>

  <script>
    let currentFile = null;
    let allFiles = [];

    // Initialization
    document.addEventListener('DOMContentLoaded', function() {
      loadFiles();
      setupFileUpload();
      setupForm();
    });

    // Setup file upload
    function setupFileUpload() {
      const fileUpload = document.getElementById('file-upload');
      const fileInput = document.getElementById('pdf-file');
      const fileInfo = document.getElementById('file-info');

      fileUpload.addEventListener('click', () => fileInput.click());
      
      fileUpload.addEventListener('dragover', (e) => {
        e.preventDefault();
        fileUpload.classList.add('dragover');
      });
      
      fileUpload.addEventListener('dragleave', () => {
        fileUpload.classList.remove('dragover');
      });
      
      fileUpload.addEventListener('drop', (e) => {
        e.preventDefault();
        fileUpload.classList.remove('dragover');
        const files = e.dataTransfer.files;
        if (files.length > 0) {
          handleFileSelect(files[0]);
        }
      });
      
      fileInput.addEventListener('change', (e) => {
        if (e.target.files.length > 0) {
          handleFileSelect(e.target.files[0]);
        }
      });
    }

    // Handle file selection
    function handleFileSelect(file) {
      if (file.type !== 'application/pdf') {
        showAlert('Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÏ€Î¹Î»Î­Î¾Ï„Îµ Î¼ÏŒÎ½Î¿ PDF Î±ÏÏ‡ÎµÎ¯Î±.', 'error');
        return;
      }

      currentFile = file;
      const fileInfo = document.getElementById('file-info');
      const fileSize = (file.size / 1024 / 1024).toFixed(2);
      
      fileInfo.innerHTML = `
        <strong>ğŸ“ ${file.name}</strong><br>
        <span>ÎœÎ­Î³ÎµÎ¸Î¿Ï‚: ${fileSize} MB</span>
      `;
      
      // Auto-fill filename if empty
      const filenameInput = document.getElementById('filename');
      if (!filenameInput.value) {
        filenameInput.value = file.name;
      }
    }

    // Setup form submission
    function setupForm() {
      const form = document.getElementById('mixanografiko-form');
      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        await submitForm();
      });
    }

    // Submit form
    async function submitForm() {
      const editId = document.getElementById('edit-id').value;
      const isEdit = !!editId;
      
      const formData = {
        title: document.getElementById('title').value,
        lykeio: document.getElementById('lykeio').value,
        field: document.getElementById('field').value,
        specialty: document.getElementById('specialty').value || '',
        description: document.getElementById('description').value || '',
        filename: document.getElementById('filename').value
      };

      // Validation
      if (!formData.title || !formData.lykeio || !formData.field || !formData.filename) {
        showAlert('Î Î±ÏÎ±ÎºÎ±Î»Ï ÏƒÏ…Î¼Ï€Î»Î·ÏÏÏƒÏ„Îµ ÏŒÎ»Î± Ï„Î± Ï…Ï€Î¿Ï‡ÏÎµÏ‰Ï„Î¹ÎºÎ¬ Ï€ÎµÎ´Î¯Î±.', 'error');
        return;
      }

      if (!isEdit && !currentFile) {
        showAlert('Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÏ€Î¹Î»Î­Î¾Ï„Îµ Î±ÏÏ‡ÎµÎ¯Î¿ PDF.', 'error');
        return;
      }

      // Add file data if new file selected
      if (currentFile) {
        try {
          const fileData = await fileToBase64(currentFile);
          formData.fileData = fileData;
        } catch (error) {
          showAlert('Î£Ï†Î¬Î»Î¼Î± ÎµÏ€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚ Î±ÏÏ‡ÎµÎ¯Î¿Ï….', 'error');
          return;
        }
      }

      const submitBtn = document.getElementById('submit-btn');
      submitBtn.disabled = true;
      submitBtn.textContent = isEdit ? 'Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ·...' : 'Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·...';

      try {
        const url = isEdit ? `/api/mixanografiko/${editId}` : '/api/mixanografiko';
        const method = isEdit ? 'PUT' : 'POST';
        
        const response = await fetch(url, {
          method: method,
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(formData)
        });

        const result = await response.json();

        if (response.ok) {
          showAlert(
            isEdit ? 'Î¤Î¿ Î±ÏÏ‡ÎµÎ¯Î¿ ÎµÎ½Î·Î¼ÎµÏÏÎ¸Î·ÎºÎµ ÎµÏ€Î¹Ï„Ï…Ï‡ÏÏ‚!' : 'Î¤Î¿ Î±ÏÏ‡ÎµÎ¯Î¿ Ï€ÏÎ¿ÏƒÏ„Î­Î¸Î·ÎºÎµ ÎµÏ€Î¹Ï„Ï…Ï‡ÏÏ‚!', 
            'success'
          );
          resetForm();
          loadFiles();
          if (isEdit) {
            closeEditModal();
          }
        } else {
          showAlert(result.error || 'Î ÏÎ¿Î­ÎºÏ…ÏˆÎµ ÏƒÏ†Î¬Î»Î¼Î±.', 'error');
        }
      } catch (error) {
        console.error('Error:', error);
        showAlert('Î£Ï†Î¬Î»Î¼Î± ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î±Ï‚ Î¼Îµ Ï„Î¿Î½ server.', 'error');
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = isEdit ? ' Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ·' : ' Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Î‘ÏÏ‡ÎµÎ¯Î¿Ï…';
      }
    }

    // Convert file to base64
    function fileToBase64(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = () => resolve(reader.result);
        reader.onerror = error => reject(error);
      });
    }

    // Load files from server
    async function loadFiles() {
      const loading = document.getElementById('loading');
      const tableContainer = document.getElementById('table-container');
      
      loading.style.display = 'block';
      tableContainer.style.display = 'none';

      try {
        const response = await fetch('/api/mixanografiko');
        if (!response.ok) {
          throw new Error('Failed to fetch files');
        }
        
        allFiles = await response.json();
        displayFiles(allFiles);
        
        loading.style.display = 'none';
        tableContainer.style.display = 'block';
      } catch (error) {
        console.error('Error loading files:', error);
        loading.innerHTML = '<div style="color: red;">Î£Ï†Î¬Î»Î¼Î± Ï†ÏŒÏÏ„Ï‰ÏƒÎ·Ï‚ Î±ÏÏ‡ÎµÎ¯Ï‰Î½. Î’ÎµÎ²Î±Î¹Ï‰Î¸ÎµÎ¯Ï„Îµ ÏŒÏ„Î¹ Î¿ server ÎµÎ¯Î½Î±Î¹ ÎµÎ½ÎµÏÎ³ÏŒÏ‚.</div>';
      }
    }

    // Display files in table
    function displayFiles(files) {
      const tbody = document.getElementById('files-table-body');
      
      if (files.length === 0) {
        tbody.innerHTML = '<tr><td colspan="9" style="text-align: center; color: #666;">Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î±ÏÏ‡ÎµÎ¯Î±</td></tr>';
        return;
      }

      tbody.innerHTML = files.map(file => `
        <tr>
          <td>${file.id}</td>
          <td>${file.title}</td>
          <td>${file.lykeio}</td>
          <td>${file.field}</td>
          <td>${file.specialty || '-'}</td>
          <td>${file.filename}</td>
          <td>${file.file_size || '-'}</td>
          <td>${file.upload_date || '-'}</td>
          <td>
            <div class="action-buttons">
              <button class="btn btn-primary btn-small" onclick="downloadFile(${file.id})">
                 Î›Î®ÏˆÎ·
              </button>
              <button class="btn btn-secondary btn-small" onclick="editFile(${file.id})">
                 Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±
              </button>
              <button class="btn btn-danger btn-small" onclick="deleteFile(${file.id}, '${file.title}')">
                 Î”Î¹Î±Î³ÏÎ±Ï†Î®
              </button>
            </div>
          </td>
        </tr>
      `).join('');
    }

    // Download file
    function downloadFile(id) {
      window.open(`/api/mixanografiko/download/${id}`, '_blank');
    }

    // Edit file
    function editFile(id) {
      const file = allFiles.find(f => f.id === id);
      if (!file) return;

      // Fill form with file data
      document.getElementById('edit-id').value = file.id;
      document.getElementById('title').value = file.title;
      document.getElementById('lykeio').value = file.lykeio;
      document.getElementById('field').value = file.field;
      document.getElementById('specialty').value = file.specialty || '';
      document.getElementById('filename').value = file.filename;
      document.getElementById('description').value = file.description || '';

      // Update form title
      document.getElementById('form-title').textContent = ' Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î± Î‘ÏÏ‡ÎµÎ¯Î¿Ï… ÎœÎ·Ï‡Î±Î½Î¿Î³ÏÎ±Ï†Î¹ÎºÎ¿Ï';
      document.getElementById('submit-btn').textContent = ' Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ·';

      // Clear file selection
      currentFile = null;
      document.getElementById('file-info').innerHTML = '<em>Î”ÎµÎ½ ÎµÏ€Î¹Î»Î­Ï‡Î¸Î·ÎºÎµ Î½Î­Î¿ Î±ÏÏ‡ÎµÎ¯Î¿ (Î¸Î± Î´Î¹Î±Ï„Î·ÏÎ·Î¸ÎµÎ¯ Ï„Î¿ Ï…Ï€Î¬ÏÏ‡Î¿Î½)</em>';

      // Scroll to form
      document.querySelector('.admin-section').scrollIntoView({ behavior: 'smooth' });
    }

    // Delete file
    async function deleteFile(id, title) {
      if (!confirm(`Î•Î¯ÏƒÏ„Îµ ÏƒÎ¯Î³Î¿Ï…ÏÎ¿Î¹ ÏŒÏ„Î¹ Î¸Î­Î»ÎµÏ„Îµ Î½Î± Î´Î¹Î±Î³ÏÎ¬ÏˆÎµÏ„Îµ Ï„Î¿ Î±ÏÏ‡ÎµÎ¯Î¿ "${title}";`)) {
        return;
      }

      try {
        const response = await fetch(`/api/mixanografiko/${id}`, {
          method: 'DELETE'
        });

        const result = await response.json();

        if (response.ok) {
          showAlert('Î¤Î¿ Î±ÏÏ‡ÎµÎ¯Î¿ Î´Î¹Î±Î³ÏÎ¬Ï†Î·ÎºÎµ ÎµÏ€Î¹Ï„Ï…Ï‡ÏÏ‚!', 'success');
          loadFiles();
        } else {
          showAlert(result.error || 'Î£Ï†Î¬Î»Î¼Î± Î´Î¹Î±Î³ÏÎ±Ï†Î®Ï‚ Î±ÏÏ‡ÎµÎ¯Î¿Ï….', 'error');
        }
      } catch (error) {
        console.error('Error:', error);
        showAlert('Î£Ï†Î¬Î»Î¼Î± ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î±Ï‚ Î¼Îµ Ï„Î¿Î½ server.', 'error');
      }
    }

    // Reset form
    function resetForm() {
      document.getElementById('mixanografiko-form').reset();
      document.getElementById('edit-id').value = '';
      document.getElementById('form-title').textContent = ' Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· ÎÎ­Î¿Ï… Î‘ÏÏ‡ÎµÎ¯Î¿Ï… ÎœÎ·Ï‡Î±Î½Î¿Î³ÏÎ±Ï†Î¹ÎºÎ¿Ï';
      document.getElementById('submit-btn').textContent = ' Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Î‘ÏÏ‡ÎµÎ¯Î¿Ï…';
      document.getElementById('file-info').innerHTML = '';
      currentFile = null;
    }

    // Show alert
    function showAlert(message, type) {
      const alertContainer = document.getElementById('alert-container');
      const alertClass = type === 'success' ? 'alert-success' : 'alert-error';
      
      alertContainer.innerHTML = `
        <div class="alert ${alertClass}">
          ${message}
        </div>
      `;
      
      // Auto remove after 5 seconds
      setTimeout(() => {
        alertContainer.innerHTML = '';
      }, 5000);
      
      // Scroll to top
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Modal functions
    function closeEditModal() {
      document.getElementById('edit-modal').style.display = 'none';
    }

    // Close modal when clicking outside
    window.onclick = function(event) {
      const modal = document.getElementById('edit-modal');
      if (event.target === modal) {
        closeEditModal();
      }
    }
  </script>
</body>
</html>
